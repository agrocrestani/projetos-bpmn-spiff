<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:spiffworkflow="http://spiffworkflow.org/bpmn/schema/1.0/core" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_96f6665" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.0.0-dev">
  <bpmn:collaboration id="Collaboration_0krc72e">
    <bpmn:participant id="Participant_1lzjh0k" processRef="Process_Guardian" />
    <bpmn:correlationKey id="CorrelationKey_0zfnfpz" name="MainCorrelationKey" />
  </bpmn:collaboration>
  <bpmn:process id="Process_Guardian">
    <bpmn:laneSet id="LaneSet_003o76c">
      <bpmn:lane id="Lane_1ji3saj">
        <bpmn:flowNodeRef>Activity_0ilhvov</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_0k0zfjf</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_0wb7vrb" name="Armazem">
        <bpmn:flowNodeRef>Activity_0tlv0ji</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0omwooq</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_Romaneio_Proprio</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_Carregamento</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_Rom_Entrada_Terceiros</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1musc35</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1m3w1tw</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0c7i1yo</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_1bn9d93</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:scriptTask id="Activity_0ilhvov" name="Define Unidade">
      <bpmn:extensionElements>
        <spiffworkflow:instructionsForEndUser />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0udm8qs</bpmn:incoming>
      <bpmn:outgoing>Flow_013r7wx</bpmn:outgoing>
      <bpmn:script># payload_guardian = {
#     "Codigo": "0000800",
#     "PlacaCarreta": "MVX9F13",
#     "PlacaVeiculo": "MVX9F13",
#     "Observacao": "APENAS TESTE!!!",
#     "TagAssociado": "E28068940000502C14A5B624",
#     "Bruto": "86920,0",
#     "Tara": "26390,0",
#     "Liquido": "60530,0",
#     "group_identifier": "Armazem_Brasnorte",
#     "Fazenda": "CURUPAI",
#     "Talhao": "",
#     "OS_Unisystem": "",
#     "Variedade": "",
#     "Tipo_Operacao": "Colheita",
#     "Armazem": "6987096402",
#     "usuario_logado": "armazem.brasnorte",
#     "motorista": "JOSE EIMAR CARLOTO SIMMI"
#   }


group_members = get_group_members(payload_guardian['group_identifier'])

# lane_owners = {
#     "Armazem": group_members
# }


talhoes = {}

# Criando variáveis separadas a partir do JSON
Codigo = payload_guardian["Codigo"]
PlacaCarreta = payload_guardian["PlacaCarreta"]
placa = payload_guardian["PlacaVeiculo"]
Observacao = payload_guardian["Observacao"]
ptag_assossiado = payload_guardian["TagAssociado"]
peso_bruto = float(payload_guardian["Bruto"].replace(',', '.'))
peso_tara = float(payload_guardian["Tara"].replace(',', '.'))
peso_liquido = float(payload_guardian["Liquido"].replace(',', '.'))
group_identifier = payload_guardian["group_identifier"]
fazenda = payload_guardian["Fazenda"]
armazem_unisystem = payload_guardian["Armazem"]
talhoes['talhao'] = payload_guardian["Talhao"]
OS_Unisystem = payload_guardian["OS_Unisystem"]
Variedade = payload_guardian["Variedade"]
Tipo_Operacao = payload_guardian["Tipo_Operacao"]
usuarioLogado = payload_guardian["usuario_logado"]
sistema = "guardian"
motorista = payload_guardian["motorista"]
data_pesagem_inicial = payload_guardian["data_pesagem_inicial"]
data_pesagem_final = payload_guardian["data_pesagem_final"]
</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:startEvent id="Event_0k0zfjf">
      <bpmn:outgoing>Flow_0udm8qs</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1kep7kr" messageRef="guardian_receive">
        <bpmn:extensionElements>
          <spiffworkflow:messageVariable>payload_guardian</spiffworkflow:messageVariable>
        </bpmn:extensionElements>
      </bpmn:messageEventDefinition>
    </bpmn:startEvent>
    <bpmn:task id="Activity_0tlv0ji" name="Colaborador/Visita">
      <bpmn:incoming>Flow_0w47m79</bpmn:incoming>
      <bpmn:outgoing>Flow_0gsov0c</bpmn:outgoing>
    </bpmn:task>
    <bpmn:userTask id="Activity_0omwooq" name="Cancela Pesagem">
      <bpmn:extensionElements>
        <spiffworkflow:properties>
          <spiffworkflow:property name="formJsonSchemaFilename" value="cancela-pesagem-schema.json" />
          <spiffworkflow:property name="formUiSchemaFilename" value="cancela-pesagem-uischema.json" />
        </spiffworkflow:properties>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_19ioriy</bpmn:incoming>
      <bpmn:outgoing>Flow_00j5498</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:subProcess id="Activity_Romaneio_Proprio" name="Romaneio de Entrada Próprio">
      <bpmn:extensionElements>
        <spiffworkflow:postScript>usuarioLogado = get_current_user()['display_name']</spiffworkflow:postScript>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1t416f5</bpmn:incoming>
      <bpmn:outgoing>Flow_12ywuln</bpmn:outgoing>
      <bpmn:startEvent id="Event_0zoxg5z">
        <bpmn:outgoing>Flow_16u6gqu</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="Flow_16u6gqu" sourceRef="Event_0zoxg5z" targetRef="Activity_105i7gb" />
      <bpmn:callActivity id="Activity_105i7gb" name="Define filial e armazem" calledElement="Process_definir_unidade_e_departamento_zxer6t3">
        <bpmn:extensionElements>
          <spiffworkflow:preScript>usuarioLogado = get_current_user()['display_name']
</spiffworkflow:preScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_16u6gqu</bpmn:incoming>
        <bpmn:outgoing>Flow_136yd5k</bpmn:outgoing>
      </bpmn:callActivity>
      <bpmn:sequenceFlow id="Flow_136yd5k" sourceRef="Activity_105i7gb" targetRef="Activity_0y50jff" />
      <bpmn:scriptTask id="Activity_0y50jff" name="Atualiza Tabelas">
        <bpmn:extensionElements>
          <spiffworkflow:instructionsForEndUser />
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_136yd5k</bpmn:incoming>
        <bpmn:outgoing>Flow_04smuyx</bpmn:outgoing>
        <bpmn:script>from connectordb.oracle import Oracle
from datetime import datetime

connection = {
    "dsn": get_secret('oracleDsn'),
    "user": get_secret('oracleUser'),
    "password": get_secret('oraclePassword')
}

#Busca Filiais
filiais_unisystem = ", ".join("'" + str(item) + "'" for item in filiais_unisystem)

query_filiais = f"""
            SELECT COD_FILIAL, DESCRICAO_FILIAL FROM FILIAIS WHERE COD_FILIAL IN ({filiais_unisystem}) ORDER BY DESCRICAO_FILIAL 
          """

rsp_filiais = Oracle(connection).selectDb(query_filiais)

filiais = []

for r in rsp_filiais:
    cod_filial = str(r['cod_filial'])
    descricao_filial = str(r['descricao_filial'])
    filiais.append(
        {
            "type": "string",
            "enum": [
                cod_filial
            ],
            "title": descricao_filial
        }
    )

#Busca Armazens
# armazem_unisystem = ", ".join("'" + str(item) + "'" for item in armazem_unisystem)

query_armazens = f"""
            SELECT SEQ_PLA_ARMAZEM, DESC_ARMAZEM FROM ZVW_ARMAZENS WHERE SEQ_PLA_ARMAZEM IN ({armazem_unisystem}) ORDER BY DESC_ARMAZEM 
          """

rsp_armazens = Oracle(connection).selectDb(query_armazens)

armazens = []

for r in rsp_armazens:
    seq_pla_armazem = str(r['seq_pla_armazem'])
    desc_armazem = str(r['desc_armazem'])
    armazens.append(
        {
            "type": "string",
            "enum": [
                seq_pla_armazem
            ],
            "title": desc_armazem
        }
    )

#Busca Safras
query_safras = f"""
            SELECT 
                cod_safra, 
                descricao_safra, 
                TO_CHAR(data_inicio, 'YYYY-MM-DD') AS data_inicio,
                TO_CHAR(data_final, 'YYYY-MM-DD') AS data_final 
            FROM SAFRAS 
            ORDER BY descricao_safra 
          """

rsp_safras = Oracle(connection).selectDb(query_safras)

data_atual = datetime.now()

safra = ''

for s in rsp_safras:
        dt_inicio = datetime.strptime(s["data_inicio"], '%Y-%m-%d')
        dt_final = datetime.strptime(s["data_final"], '%Y-%m-%d')

        if dt_inicio &lt;= data_atual &lt;= dt_final:
            safra = str(s["cod_safra"])

safras = []

for r in rsp_safras:
    cod_safra = str(r['cod_safra'])
    descricao_safra = str(r['descricao_safra'])
    safras.append(
        {
            "type": "string",
            "enum": [
                cod_safra
            ],
            "title": descricao_safra
        }
    )

#Busca Equipes
query_equipes = f"""
            SELECT * 
            FROM EQUIPE_COLHEITA EC
            WHERE zac_retDePara('U','992','EQUIPE_COLHEITA',EC.seq_pla_equipe,NULL,NULL) IS NOT NULL
            ORDER BY NOME_EQUIPE
          """

rsp_equipes = Oracle(connection).selectDb(query_equipes)

equipes = []

for r in rsp_equipes:
    seq_pla_equipe = str(r['seq_pla_equipe'])
    nome_equipe = str(r['nome_equipe'])
    equipes.append(
        {
            "type": "string",
            "enum": [
                seq_pla_equipe
            ],
            "title": nome_equipe
        }
    )

#Busca Talhoes
query_talhoes = f"""
            select t0.TALHAO 
            from zvw_os_colheita t0
            INNER JOIN FAZENDAS t1 ON t0.SEQ_PLA_FAZENDA = t1.SEQ_PLA_FAZENDA
            INNER JOIN AGLOMERADOS t2 ON t1.SEQ_PLA_AGLOMERADO = t2.SEQ_PLA_AGLOMERADO 
            INNER JOIN FILIAIS t3 ON t2.COD_FILIAL = t3.COD_FILIAL
            WHERE 
                t3.COD_FILIAL IN ({filiais_unisystem})
            ORDER BY T0.TALHAO
          """

rsp_talhoes = Oracle(connection).selectDb(query_talhoes)

talhoes_list = []

for r in rsp_talhoes:
    cod_talhao = str(r['talhao'])
    desc_talhao = str(r['talhao'])
    talhoes_list.append(
        {
            "type": "string",
            "enum": [
                cod_talhao
            ],
            "title": desc_talhao
        }
    )

#Busca Series
query_series = f"""
            SELECT SEQ_PLA_SERIE, SERIE FROM SERIES ORDER BY SERIE
          """

rsp_series = Oracle(connection).selectDb(query_series)

series_list = []

for r in rsp_series:
    seq_pla_serie = str(r['seq_pla_serie'])
    serie = str(r['serie'])
    series_list.append(
        {
            "type": "string",
            "enum": [
                seq_pla_serie
            ],
            "title": serie
        }
    )

del(rsp_filiais)
del(connection)
del(query_filiais)
del(rsp_armazens)
del(query_armazens)
del(rsp_safras),
del(query_safras)
del(rsp_equipes)
del(query_equipes)
del(r)
</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:exclusiveGateway id="Gateway_1ukd414">
        <bpmn:incoming>Flow_04smuyx</bpmn:incoming>
        <bpmn:incoming>Flow_1io6pzs</bpmn:incoming>
        <bpmn:incoming>Flow_0koquo6</bpmn:incoming>
        <bpmn:outgoing>Flow_1lciuki</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_04smuyx" sourceRef="Activity_0y50jff" targetRef="Gateway_1ukd414" />
      <bpmn:sequenceFlow id="Flow_1lciuki" sourceRef="Gateway_1ukd414" targetRef="Activity_Entrada_Propria" />
      <bpmn:sequenceFlow id="Flow_0klpgas" sourceRef="Activity_Entrada_Propria" targetRef="Activity_1melp3v" />
      <bpmn:sequenceFlow id="Flow_0xgvf0k" sourceRef="Activity_1melp3v" targetRef="Activity_1nolbm5" />
      <bpmn:exclusiveGateway id="Gateway_14tzpxq" default="Flow_1ex4mqu">
        <bpmn:incoming>Flow_1igm958</bpmn:incoming>
        <bpmn:outgoing>Flow_1ex4mqu</bpmn:outgoing>
        <bpmn:outgoing>Flow_0oab1ki</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_1igm958" sourceRef="Activity_1nolbm5" targetRef="Gateway_14tzpxq" />
      <bpmn:endEvent id="Event_0ncmgh9">
        <bpmn:incoming>Flow_0v2d1gu</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sequenceFlow id="Flow_1ex4mqu" sourceRef="Gateway_14tzpxq" targetRef="Activity_1v76b40" />
      <bpmn:userTask id="Activity_Entrada_Propria" name="Romaneio de Entrada">
        <bpmn:extensionElements>
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="dados-iniciais-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="dados-iniciais-uischema.json" />
          </spiffworkflow:properties>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 20px;
            background-color: #ffffff;
        }
        /* Estrutura da Tabela/Grid */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border: 1px solid #c8e6c9;
            border-left: 10px solid var(--verde-escuro);
            padding: 15px;
            border-radius: 4px;
        }
       .coluna {
            flex: 1;
            padding: 0 10px;
        }
        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae; /* Divisória suave entre colunas */
        }
        .label {
            display: block;
            font-size: 0.75rem;
            color: #555;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }
        .valor {
            display: block;
            font-size: 1.15rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }
        /* Estilo do Subheader */
        .subheader {
            margin-top: 20px;
            color: var(--verde-escuro);
            font-size: 1.5rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            padding-right: 50px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label"&gt;Ticket Guardian&lt;/span&gt;
            &lt;span class="valor" style="color: var(--verde-agro);"&gt;#{{Codigo}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label"&gt;Placa&lt;/span&gt;
            &lt;span class="valor"&gt;{{placa}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label"&gt;Tipo Carga&lt;/span&gt;
            &lt;span class="valor"&gt;{{Tipo_Operacao}}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;h2 class="subheader"&gt;Romaneio de Entrada&lt;/h2&gt;

&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:postScript>try:
    for f in filiais:
        if f["enum"] == filial:
            cod_filial = f["enum"]
            descricao_filial = f["title"]
except:
    cod_filial = 999
    descricao_filial = "Filial não selecionada"

# Soma direta percorrendo a lista
total_carga = sum(item['porcentagem_carga'] for item in talhoes)</spiffworkflow:postScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1lciuki</bpmn:incoming>
        <bpmn:outgoing>Flow_0klpgas</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:scriptTask id="Activity_1melp3v" name="Busca Info Unisystem">
        <bpmn:incoming>Flow_0klpgas</bpmn:incoming>
        <bpmn:outgoing>Flow_0xgvf0k</bpmn:outgoing>
        <bpmn:script>from connectordb.oracle import Oracle
from connectordb.hana import Hana

connection = {
    "dsn": get_secret('oracleDsn'),
    "user": get_secret('oracleUser'),
    "password": get_secret('oraclePassword')
}

talhoes_consulta = []
for i in talhoes:
    talhoes_consulta.append(i['talhao'])
    
talhoes_consulta = ", ".join("'" + str(item) + "'" for item in talhoes_consulta)

query_os = f"""
            select * from zvw_os_colheita where talhao in ({talhoes_consulta})
          """
os = Oracle(connection).selectDb(query_os)

produto = os[0]['produto']
seq_pla_produto = os[0]['seq_pla_produto']

del(query_os)
del(connection)</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:scriptTask id="Activity_1nolbm5" name="Valida Placa">
        <bpmn:incoming>Flow_0xgvf0k</bpmn:incoming>
        <bpmn:outgoing>Flow_1igm958</bpmn:outgoing>
        <bpmn:script>from connectordb.hana import Hana

connection = {
    "address": get_secret('hanaAddress'),
    "port": int(get_secret('hanaPort')),
    "user": get_secret('hanaUser'),
    "password": get_secret('hanaPassword')
}

baseSap = get_secret('baseSap')

caracteres_para_remover = ["-", ".", "_", "/"]

# Remove cada caractere usando replace
for caractere in caracteres_para_remover:
  placa = placa.replace(caractere, "")

placa = placa.upper()

query_placa = f"""
            SELECT O."ItemCode" FROM {baseSap}.OITM O WHERE ("FrgnName" = '{placa}' OR "InventryNo" = '{placa}') 
          """

rsp_placa = Hana(connection).selectDb(query_placa)

if rsp_placa:
  placa_valida = True
else:
  placa_valida = False
  mensagem_placa = "Placa não foi encontrada no SAP. Clique em continuar para corrigir a placa."

del(connection)</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:sequenceFlow id="Flow_0oab1ki" sourceRef="Gateway_14tzpxq" targetRef="Activity_1x3xako">
        <bpmn:conditionExpression>placa_valida == False or total_carga != 100</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_1io6pzs" sourceRef="Activity_1x3xako" targetRef="Gateway_1ukd414" />
      <bpmn:manualTask id="Activity_1x3xako" name="Mensagem">
        <bpmn:extensionElements>
          <spiffworkflow:instructionsForEndUser>&lt;div style="border: 1px solid #ffeeba; background-color: #fff3cd; color: #856404; padding: 20px; border-radius: 5px; margin: 20px 0;"&gt;
  &lt;h1 style="margin-top: 0;"&gt;Validação da placa&lt;/h1&gt;
  &lt;h3&gt;{{mensagem_erro}}&lt;/h3&gt;
&lt;/div&gt;</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:preScript>if not placa_valida:
    mensagem_erro = f"A placa {placa} não foi encontrada no SAP. Por favor, verifique e clique em &lt;strong&gt;continuar&lt;/strong&gt; para corrigir a placa."
elif total_carga != 100:
    mensagem_erro = "Verifique os percentuais das cargas dos talhões. A soma do percentual deve ser 100%."
else:
    mensagem_erro = ""</spiffworkflow:preScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0oab1ki</bpmn:incoming>
        <bpmn:outgoing>Flow_1io6pzs</bpmn:outgoing>
      </bpmn:manualTask>
      <bpmn:sequenceFlow id="Flow_05ajo3e" sourceRef="Activity_1v76b40" targetRef="Gateway_1p75pxl" />
      <bpmn:manualTask id="Activity_1v76b40" name="Dados do ticket">
        <bpmn:extensionElements>
          <spiffworkflow:preScript>from datetime import datetime

# Obtém a data e hora atual
data_atual = datetime.now().strftime("%d/%m/%Y %H:%M:%S")

for o in os:
    unidade_os = o['fazenda']
    numero_os = o['nr_os']</spiffworkflow:preScript>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-BR"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Ticket de Pesagem - Guardian&lt;/title&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
            --branco: #ffffff;
            --cinza-borda: #ddd;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .ticket-container {
            max-width: 700px;
            margin: 0 auto;
            background-color: var(--branco);
            border: 1px solid var(--cinza-borda);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        /* Cabeçalho 3 Colunas (Informações Críticas) */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border-bottom: 1px solid var(--cinza-borda);
            border-left: 10px solid var(--verde-escuro);
            padding: 20px;
        }
        .coluna {
            flex: 1;
            padding: 0 15px;
        }
        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae;
        }
        .label-topo {
            display: block;
            font-size: 0.7rem;
            color: #666;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }
        .valor-topo {
            display: block;
            font-size: 1.1rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }
        /* Subheader Estilizado */
        .subheader-box {
            padding: 20px 25px 0;
        }
        .subheader {
            color: var(--verde-escuro);
            font-size: 1.4rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            margin-bottom: 15px;
        }
        /* Seções de Dados */
        .ticket-content {
            padding: 0 25px 25px;
        }
        .ticket-section {
            margin-bottom: 15px;
            border: 1px solid var(--cinza-borda);
            padding: 15px;
            border-radius: 6px;
            background-color: #fcfdfc;
        }
        .ticket-section p {
            margin: 6px 0;
            font-size: 15px;
            display: flex;
            justify-content: flex-start;
        }
        .label {
            font-weight: bold;
            color: var(--verde-agro);
            width: 140px;
            display: inline-block;
        }
        /* Estilo para Loop de Talhões */
        .talhao-row {
            background-color: #fff;
            border-bottom: 1px dashed #eee;
            padding: 5px 0;
        }
        .talhao-row:last-child { border-bottom: none; }
        /* Resumo de Pesos */
        .ticket-summary {
            text-align: center;
            font-size: 22px;
            font-weight: 800;
            color: var(--verde-escuro);
            background-color: var(--fundo-leve);
            margin-top: 10px;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid var(--verde-agro);
        }
        .print-button {
            display: block;
            width: 220px;
            margin: 20px auto;
            padding: 12px;
            background-color: var(--verde-escuro);
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            text-align: center;
            transition: background 0.3s;
        }
        .print-button:hover {
            background-color: var(--verde-agro);
        }

        @media print {
            .print-button { display: none; }
            body { background: white; padding: 0; }
            .ticket-container { box-shadow: none; border: 1px solid #000; }
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class="ticket-container"&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Ticket Guardian&lt;/span&gt;
            &lt;span class="valor-topo"&gt;#{{Codigo}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Placa&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{placa}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Operação&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{Tipo_Operacao}}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="subheader-box"&gt;
        &lt;h2 class="subheader"&gt;Dados do Ticket / Romaneio de Entrada&lt;/h2&gt;
    &lt;/div&gt;
    &lt;div class="ticket-content"&gt;
        &lt;div class="ticket-section"&gt;
            &lt;p&gt;&lt;span class="label"&gt;Data:&lt;/span&gt; &lt;span&gt;{{data_atual}}&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;&lt;span class="label"&gt;OS Unisystem:&lt;/span&gt; &lt;span&gt;{{numero_os}}&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;&lt;span class="label"&gt;Unidade:&lt;/span&gt; &lt;span&gt;{{unidade_os}}&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;&lt;span class="label"&gt;Motorista:&lt;/span&gt; &lt;span&gt;{{motorista}}&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;&lt;span class="label"&gt;Produto:&lt;/span&gt; &lt;span&gt;{{produto}}&lt;/span&gt;&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="ticket-section"&gt;
            &lt;div style="font-weight: bold; margin-bottom: 10px; color: var(--verde-escuro); border-bottom: 1px solid #eee;"&gt;Distribuição por Talhão&lt;/div&gt;
            {% for t in talhoes %}
            &lt;div class="talhao-row"&gt;
                &lt;p&gt;
                    &lt;span class="label" style="width: 80px;"&gt;Talhão:&lt;/span&gt; 
                    &lt;span style="flex-grow: 1;"&gt;{{ t['talhao'] }}&lt;/span&gt;
                    &lt;span class="label" style="width: 140px;"&gt;Porcentagem:&lt;/span&gt; 
                    &lt;span&gt;{{ t['porcentagem_carga'] }}%&lt;/span&gt;
                &lt;/p&gt;
            &lt;/div&gt;
            {% endfor %}
        &lt;/div&gt;
        &lt;div class="ticket-section"&gt;
            &lt;p&gt;&lt;span class="label"&gt;Peso Bruto:&lt;/span&gt; &lt;span&gt;{{peso_bruto}} kg&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;&lt;span class="label"&gt;Peso Tara:&lt;/span&gt; &lt;span&gt;{{peso_tara}} kg&lt;/span&gt;&lt;/p&gt;
            &lt;div class="ticket-summary"&gt;
                Peso Líquido: {{peso_liquido}} kg
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1ex4mqu</bpmn:incoming>
        <bpmn:outgoing>Flow_05ajo3e</bpmn:outgoing>
      </bpmn:manualTask>
      <bpmn:sequenceFlow id="Flow_1nna3yh" sourceRef="Activity_11v3g19" targetRef="Activity_1dr1qud" />
      <bpmn:userTask id="Activity_11v3g19" name="Classificação">
        <bpmn:extensionElements>
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="classificacao-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="classificacao-uischema.json" />
          </spiffworkflow:properties>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 20px;
            background-color: #ffffff;
        }
        /* Estrutura da Tabela/Grid */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border: 1px solid #c8e6c9;
            border-left: 10px solid var(--verde-escuro);
            padding: 15px;
            border-radius: 4px;
        }
       .coluna {
            flex: 1;
            padding: 0 10px;
        }
        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae; /* Divisória suave entre colunas */
        }
        .label {
            display: block;
            font-size: 0.75rem;
            color: #555;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }
        .valor {
            display: block;
            font-size: 1.15rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }
        /* Estilo do Subheader */
        .subheader {
            margin-top: 20px;
            color: var(--verde-escuro);
            font-size: 1.5rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            padding-right: 50px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label"&gt;Ticket Guardian&lt;/span&gt;
            &lt;span class="valor" style="color: var(--verde-agro);"&gt;#{{Codigo}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label"&gt;Placa&lt;/span&gt;
            &lt;span class="valor"&gt;{{placa}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label"&gt;Tipo Carga&lt;/span&gt;
            &lt;span class="valor"&gt;{{Tipo_Operacao}}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;h2 class="subheader"&gt;Classificação&lt;/h2&gt;

&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:preScript>numeroclassificacao = "0"</spiffworkflow:preScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0lrsl8v</bpmn:incoming>
        <bpmn:outgoing>Flow_1nna3yh</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:exclusiveGateway id="Gateway_1lnghmd">
        <bpmn:incoming>Flow_0corjcl</bpmn:incoming>
        <bpmn:incoming>Flow_0bqsj54</bpmn:incoming>
        <bpmn:outgoing>Flow_173bou3</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_173bou3" sourceRef="Gateway_1lnghmd" targetRef="Activity_0etd0j3" />
      <bpmn:sequenceFlow id="Flow_0g30x8t" sourceRef="Activity_0etd0j3" targetRef="Gateway_1fpt591" />
      <bpmn:exclusiveGateway id="Gateway_1fpt591" default="Flow_0v2d1gu">
        <bpmn:incoming>Flow_0g30x8t</bpmn:incoming>
        <bpmn:outgoing>Flow_0v2d1gu</bpmn:outgoing>
        <bpmn:outgoing>Flow_121yxsj</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_0v2d1gu" sourceRef="Gateway_1fpt591" targetRef="Event_0ncmgh9" />
      <bpmn:sequenceFlow id="Flow_121yxsj" sourceRef="Gateway_1fpt591" targetRef="Activity_0n087k7">
        <bpmn:conditionExpression>code_proc != 201</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_0corjcl" sourceRef="Activity_0n087k7" targetRef="Gateway_1lnghmd" />
      <bpmn:scriptTask id="Activity_0etd0j3" name="Envia para Unisystem">
        <bpmn:incoming>Flow_173bou3</bpmn:incoming>
        <bpmn:outgoing>Flow_0g30x8t</bpmn:outgoing>
        <bpmn:script>from connectordb.oracle import Oracle
from datetime import datetime
import json

usuarioLogado = get_current_user()['display_name']

connection = {
    "dsn": get_secret('oracleDsn'),
    "user": get_secret('oracleUser'),
    "password": get_secret('oraclePassword')
}

spiff_instancia = get_toplevel_process_info()['process_instance_id']
id_processo = get_current_task_info()['id']

for t in talhoes:
    for o in os:
        if t['talhao'] == o['talhao']:
            t['pfazenda'] = o['seq_pla_fazenda']
            t['pordermservico'] = o['seq_pla_ordem']

# talhoes = json.dumps(talhoes)

data_envio = datetime.now().strftime("%d/%m/%Y")
if not observacao:
    observacao = None

#inicializa variaveis das notas. Para não dar erro no processo.

payload = {
    "pcodigo": Codigo,
    "pplacaveiculo": placa,
    "pplacacarreta": placa,
    "ptagassociado": None,
    "pmotorista": motorista,
    "ptalhoes": talhoes,
    "pproduto": seq_pla_produto,
    "pbruto": peso_bruto,
    "ptara": peso_tara,
    "pliquido": peso_liquido,
    "ptipodocumento": "osg",
    "parmazem": armazem,
    "pdata": data_envio,
    "psafra": safra,
    "pequipe": equipe,
    "pumidade": umidade,
    "pimpureza": impureza,
    "pavariados": avariados,
    "pquebrados": quebrados,
    "pardidos": ardidos,
    "poutros": outros,
    "pgraosverdes": graosverdes,
    "pnotaorigem": None,
    "pdataorigem": None,
    "pserieorigem": None,
    "pvalororigem": None,
    "pqtdeorigem": None,
    "pobservacao": observacao,
    "pordemcarregamento": ordem_carregamento,
    "data_pesagem_inicial": data_pesagem_inicial,
    "data_pesagem_final": data_pesagem_final,
    "origem": group_identifier,
    "usuario": usuarioLogado.upper(),
    "numeroclassificacao": numeroclassificacao
}

# payload2 = " ".join(payload.splitlines())

# payload3 = "{"+payload2+"}"

payload = json.dumps(payload)

payload_proc = [f"'{payload}'"]

romaneio = Oracle(connection).callProc('zprocessaromaneio', id_processo, payload)

code_proc, message_proc = romaneio

del(connection)</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:manualTask id="Activity_0n087k7" name="Mensagem Erro">
        <bpmn:extensionElements>
          <spiffworkflow:instructionsForEndUser>&lt;div style="border: 1px solid #ffeeba; background-color: #fff3cd; color: #856404; padding: 20px; border-radius: 5px; margin: 20px 0;"&gt;
  &lt;h1 style="margin-top: 0;"&gt;Erro na inclusão do Romaneio&lt;/h1&gt;
  &lt;h3&gt;{{message_proc}}&lt;/h3&gt;
&lt;/div&gt;
</spiffworkflow:instructionsForEndUser>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_121yxsj</bpmn:incoming>
        <bpmn:outgoing>Flow_0corjcl</bpmn:outgoing>
      </bpmn:manualTask>
      <bpmn:sequenceFlow id="Flow_0bqsj54" sourceRef="Activity_1dr1qud" targetRef="Gateway_1lnghmd" />
      <bpmn:boundaryEvent id="Event_0141z9j" attachedToRef="Activity_1dr1qud">
        <bpmn:extensionElements>
          <spiffworkflow:signalButtonLabel>Corrigir Classificação</spiffworkflow:signalButtonLabel>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_1prezdt</bpmn:outgoing>
        <bpmn:signalEventDefinition id="SignalEventDefinition_0apmrv8" signalRef="Corrigir_Classificacao" />
      </bpmn:boundaryEvent>
      <bpmn:exclusiveGateway id="Gateway_1p75pxl">
        <bpmn:incoming>Flow_05ajo3e</bpmn:incoming>
        <bpmn:incoming>Flow_1prezdt</bpmn:incoming>
        <bpmn:outgoing>Flow_0lrsl8v</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_0lrsl8v" sourceRef="Gateway_1p75pxl" targetRef="Activity_11v3g19" />
      <bpmn:sequenceFlow id="Flow_1prezdt" sourceRef="Event_0141z9j" targetRef="Gateway_1p75pxl" />
      <bpmn:exclusiveGateway id="Gateway_09p7dmx">
        <bpmn:incoming>Flow_1yf2mnp</bpmn:incoming>
        <bpmn:incoming>Flow_0ctd8t1</bpmn:incoming>
        <bpmn:outgoing>Flow_0koquo6</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_0koquo6" sourceRef="Gateway_09p7dmx" targetRef="Gateway_1ukd414" />
      <bpmn:boundaryEvent id="Event_1g8aler" attachedToRef="Activity_1v76b40">
        <bpmn:extensionElements>
          <spiffworkflow:signalButtonLabel>Corrigir Romaneio</spiffworkflow:signalButtonLabel>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_1yf2mnp</bpmn:outgoing>
        <bpmn:signalEventDefinition id="SignalEventDefinition_0hjczt9" signalRef="Corrigir_Romaneio" />
      </bpmn:boundaryEvent>
      <bpmn:sequenceFlow id="Flow_1yf2mnp" sourceRef="Event_1g8aler" targetRef="Gateway_09p7dmx" />
      <bpmn:boundaryEvent id="Event_020hfzr" attachedToRef="Activity_1dr1qud">
        <bpmn:extensionElements>
          <spiffworkflow:signalButtonLabel>Corrigir Romaneio</spiffworkflow:signalButtonLabel>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_0ctd8t1</bpmn:outgoing>
        <bpmn:signalEventDefinition id="SignalEventDefinition_1nsnzco" signalRef="Corrigir_Romaneio" />
      </bpmn:boundaryEvent>
      <bpmn:sequenceFlow id="Flow_0ctd8t1" sourceRef="Event_020hfzr" targetRef="Gateway_09p7dmx" />
      <bpmn:userTask id="Activity_1dr1qud" name="Conferência">
        <bpmn:extensionElements>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-BR"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Ticket de Pesagem - Guardian&lt;/title&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
            --branco: #ffffff;
            --cinza-borda: #ddd;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .ticket-container {
            max-width: 700px;
            margin: 0 auto;
            background-color: var(--branco);
            border: 1px solid var(--cinza-borda);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        /* Cabeçalho 3 Colunas */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border-bottom: 1px solid var(--cinza-borda);
            border-left: 10px solid var(--verde-escuro);
            padding: 20px;
        }
        .coluna {
            flex: 1;
            padding: 0 15px;
        }
        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae;
        }
        .label-topo {
            display: block;
            font-size: 0.7rem;
            color: #666;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }
        .valor-topo {
            display: block;
            font-size: 1.1rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }
        .subheader-box {
            padding: 20px 25px 0;
        }
        .subheader {
            color: var(--verde-escuro);
            font-size: 1.4rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            margin-bottom: 15px;
        }
        .ticket-content {
            padding: 0 25px 25px;
        }
        .ticket-section {
            margin-bottom: 15px;
            border: 1px solid var(--cinza-borda);
            padding: 15px;
            border-radius: 6px;
            background-color: #fcfdfc;
        }
        .ticket-section p {
            margin: 6px 0;
            font-size: 15px;
            display: flex;
        }
        .label {
            font-weight: bold;
            color: var(--verde-agro);
            width: 140px;
            display: inline-block;
        }
        /* Grid de Classificação */
        .classificacao-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 10px 0;
        }
        .classificacao-item {
            border-bottom: 1px solid #eee;
            padding: 4px 0;
            display: flex;
            justify-content: space-between;
        }
        .obs-box {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--cinza-borda);
            font-style: italic;
            font-size: 0.9rem;
        }
        .talhao-row {
            background-color: #fff;
            border-bottom: 1px dashed #eee;
            padding: 5px 0;
        }
        .ticket-summary {
            text-align: center;
            font-size: 22px;
            font-weight: 800;
            color: var(--verde-escuro);
            background-color: var(--fundo-leve);
            margin-top: 10px;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid var(--verde-agro);
        }
        .print-button {
            display: block;
            width: 220px;
            margin: 20px auto;
            padding: 12px;
            background-color: var(--verde-escuro);
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            text-align: center;
        }
        @media print {
            .print-button { display: none; }
            body { background: white; padding: 0; }
            .ticket-container { box-shadow: none; border: 1px solid #000; }
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="ticket-container"&gt;
        &lt;div class="container-topo"&gt;
            &lt;div class="coluna"&gt;
                &lt;span class="label-topo"&gt;Ticket Guardian&lt;/span&gt;
                &lt;span class="valor-topo"&gt;#{{Codigo}}&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class="coluna"&gt;
                &lt;span class="label-topo"&gt;Placa&lt;/span&gt;
                &lt;span class="valor-topo"&gt;{{placa}}&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class="coluna"&gt;
                &lt;span class="label-topo"&gt;Operação&lt;/span&gt;
                &lt;span class="valor-topo"&gt;{{Tipo_Operacao}}&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="subheader-box"&gt;
            &lt;h2 class="subheader"&gt;Conferência antes de enviar para o Unisystem&lt;/h2&gt;
        &lt;/div&gt;
        &lt;div class="ticket-content"&gt;
            &lt;div class="ticket-section"&gt;
                &lt;p&gt;&lt;span class="label"&gt;Data:&lt;/span&gt;&lt;span&gt;{{data_atual}}&lt;/span&gt;&lt;/p&gt;
                &lt;p&gt;&lt;span class="label"&gt;OS Unisystem:&lt;/span&gt;&lt;span&gt;{{numero_os}}&lt;/span&gt;&lt;/p&gt;
                &lt;p&gt;&lt;span class="label"&gt;Unidade:&lt;/span&gt;&lt;span&gt;{{unidade_os}}&lt;/span&gt;&lt;/p&gt;
                &lt;p&gt;&lt;span class="label"&gt;Motorista:&lt;/span&gt;&lt;span&gt;{{motorista}}&lt;/span&gt;&lt;/p&gt;
                &lt;p&gt;&lt;span class="label"&gt;Produto:&lt;/span&gt;&lt;span&gt;{{produto}}&lt;/span&gt;&lt;/p&gt;
            &lt;/div&gt;
            &lt;div class="ticket-section"&gt;
                &lt;div style="font-weight: bold; margin-bottom: 5px; color: var(--verde-escuro);"&gt;Classificação Técnica&lt;/div&gt;
                &lt;p&gt;&lt;span class="label" style="width: 180px;"&gt;Nº Classificação:&lt;/span&gt;&lt;span style="font-weight: bold;"&gt;{{ '-' if numeroclassificacao == '0' or numeroclassificacao is none else numeroclassificacao }}&lt;/span&gt;&lt;/p&gt;
                &lt;div class="classificacao-grid"&gt;
                    &lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Umidade:&lt;/span&gt;&lt;span&gt;{{umidade}}&lt;/span&gt;&lt;/div&gt;
                    &lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Impureza:&lt;/span&gt;&lt;span&gt;{{impureza}}&lt;/span&gt;&lt;/div&gt;
                    &lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Avariados:&lt;/span&gt;&lt;span&gt;{{avariados}}&lt;/span&gt;&lt;/div&gt;
                    &lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Quebrados:&lt;/span&gt;&lt;span&gt;{{quebrados}}&lt;/span&gt;&lt;/div&gt;
                    &lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Ardidos:&lt;/span&gt;&lt;span&gt;{{ardidos}}&lt;/span&gt;&lt;/div&gt;
                    &lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Grãos Verdes:&lt;/span&gt;&lt;span&gt;{{graosverdes}}&lt;/span&gt;&lt;/div&gt;
                    &lt;div class="classificacao-item" style="grid-column: span 2;"&gt;&lt;span class="label" style="width: auto;"&gt;Outros:&lt;/span&gt;&lt;span&gt;{{outros}}&lt;/span&gt;&lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="obs-box"&gt;
                    &lt;strong&gt;Observação:&lt;/strong&gt; {{observacao}}
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="ticket-section"&gt;
                &lt;div style="font-weight: bold; margin-bottom: 10px; color: var(--verde-escuro); border-bottom: 1px solid #eee;"&gt;Distribuição por Talhão&lt;/div&gt;
                {% for t in talhoes %}
                &lt;div class="talhao-row"&gt;
                    &lt;p&gt;
                        &lt;span class="label" style="width: 80px;"&gt;Talhão:&lt;/span&gt;
                        &lt;span style="flex-grow: 1;"&gt;{{ t['talhao'] }}&lt;/span&gt;
                        &lt;span class="label" style="width: 140px;"&gt;Porcentagem:&lt;/span&gt;
                        &lt;span&gt;{{ t['porcentagem_carga'] }}%&lt;/span&gt;
                    &lt;/p&gt;
                &lt;/div&gt;
                {% endfor %}
            &lt;/div&gt;
            &lt;div class="ticket-section"&gt;
                &lt;p&gt;&lt;span class="label"&gt;Peso Bruto:&lt;/span&gt;&lt;span&gt;{{peso_bruto}} kg&lt;/span&gt;&lt;/p&gt;
                &lt;p&gt;&lt;span class="label"&gt;Peso Tara:&lt;/span&gt;&lt;span&gt;{{peso_tara}} kg&lt;/span&gt;&lt;/p&gt;
                &lt;div class="ticket-summary"&gt;
                    Peso Líquido: {{peso_liquido}} kg
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="conferencia-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="conferencia-uischema.json" />
          </spiffworkflow:properties>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1nna3yh</bpmn:incoming>
        <bpmn:outgoing>Flow_0bqsj54</bpmn:outgoing>
      </bpmn:userTask>
    </bpmn:subProcess>
    <bpmn:subProcess id="Activity_Carregamento" name="Carregamento">
      <bpmn:extensionElements>
        <spiffworkflow:postScript>usuarioLogado = get_current_user()['display_name']</spiffworkflow:postScript>
        <spiffworkflow:instructionsForEndUser />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_11taq3a</bpmn:incoming>
      <bpmn:outgoing>Flow_118mmlb</bpmn:outgoing>
      <bpmn:startEvent id="Event_1qogmqf">
        <bpmn:outgoing>Flow_1lxx7qc</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="Flow_1lxx7qc" sourceRef="Event_1qogmqf" targetRef="Activity_0o3xe4a" />
      <bpmn:callActivity id="Activity_0o3xe4a" name="Define filial e armazem" calledElement="Process_definir_unidade_e_departamento_zxer6t3">
        <bpmn:extensionElements>
          <spiffworkflow:preScript>usuarioLogado = get_current_user()['display_name']</spiffworkflow:preScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1lxx7qc</bpmn:incoming>
        <bpmn:outgoing>Flow_1mh7hhy</bpmn:outgoing>
      </bpmn:callActivity>
      <bpmn:sequenceFlow id="Flow_1mh7hhy" sourceRef="Activity_0o3xe4a" targetRef="Activity_11m10av" />
      <bpmn:scriptTask id="Activity_11m10av" name="Atualiza Tabelas">
        <bpmn:extensionElements>
          <spiffworkflow:instructionsForEndUser />
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1mh7hhy</bpmn:incoming>
        <bpmn:outgoing>Flow_1hzqs8s</bpmn:outgoing>
        <bpmn:script>from connectordb.oracle import Oracle
from datetime import datetime

connection = {
    "dsn": get_secret('oracleDsn'),
    "user": get_secret('oracleUser'),
    "password": get_secret('oraclePassword')
}

#Busca Filiais
filiais_unisystem = ", ".join("'" + str(item) + "'" for item in filiais_unisystem)

query = f"SELECT * FROM AC_VW_SALDO_CONTRATO_GRAOS avc WHERE avc.QUANTIDADE &gt; 0 AND avc.COD_SAFRA = 16"
rsp_instrucoes = Oracle(connection).selectDb(query)
parceiros = []

for r in rsp_instrucoes:
    codigo_pn = str(r['seq_pla_endereco'])
    nome_pn = str(r['nome_cliente'])
    parceiros.append(
        {
            "type": "string",
            "enum": [
                codigo_pn
            ],
            "title": nome_pn
        }
    )

del(connection)
del(query)</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:exclusiveGateway id="Gateway_0z8u3h9">
        <bpmn:incoming>Flow_1m4ap3y</bpmn:incoming>
        <bpmn:incoming>Flow_07om7y9</bpmn:incoming>
        <bpmn:outgoing>Flow_06xts44</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_1hzqs8s" sourceRef="Activity_11m10av" targetRef="Activity_1knxsgc" />
      <bpmn:sequenceFlow id="Flow_06xts44" sourceRef="Gateway_0z8u3h9" targetRef="Activity_1stgqhy" />
      <bpmn:endEvent id="Event_0i6duu6">
        <bpmn:incoming>Flow_1agtqi8</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sequenceFlow id="Flow_1av3k3k" sourceRef="Activity_08da8i1" targetRef="Gateway_0iilj6f" />
      <bpmn:sequenceFlow id="Flow_151zoq6" sourceRef="Activity_17yvhbq" targetRef="Activity_1tx4cxs" />
      <bpmn:userTask id="Activity_17yvhbq" name="Selecionar parceiro de negócio">
        <bpmn:extensionElements>
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="parceiro-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="parceiro-uischema.json" />
          </spiffworkflow:properties>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Romaneio de Entrada - Agronegócio&lt;/title&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
            --cinza-texto: #444;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 20px;
            background-color: #ffffff;
            color: var(--cinza-texto);
        }

        /* Cabeçalho em 3 Colunas (Código 1) */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border: 1px solid #c8e6c9;
            border-left: 10px solid var(--verde-escuro);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 25px;
        }

        .coluna {
            flex: 1;
            padding: 0 10px;
        }

        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae;
        }

        .label-topo {
            display: block;
            font-size: 0.75rem;
            color: #666;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .valor-topo {
            display: block;
            font-size: 1.15rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }

        /* Título e Subheader */
        .subheader {
            color: var(--verde-escuro);
            font-size: 1.5rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            padding-right: 50px;
            margin-bottom: 20px;
        }

        /* Tabela de Dados (Código 2 Estilizado) */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        th, td {
            border: 1px solid #e0e0e0;
            padding: 12px 15px;
            text-align: left;
        }

        th {
            background-color: var(--verde-escuro);
            color: white;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        tr:nth-child(even) {
            background-color: #fcfdfc;
        }

        tr:hover {
            background-color: #f1f8e9;
        }

        .campo-nome {
            font-weight: bold;
            color: var(--verde-agro);
            width: 30%;
        }

        .campo-valor {
            font-weight: 500;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Ticket Guardian&lt;/span&gt;
            &lt;span class="valor-topo" style="color: var(--verde-agro);"&gt;#{{Codigo}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Placa&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{placa}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Tipo Operação&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{Tipo_Operacao}}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;h2 class="subheader"&gt;Selecione o parceiro de negócio:&lt;/h2&gt;
    &lt;table&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Campo&lt;/th&gt;
                &lt;th&gt;Valor Detalhado&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Código do Ticket&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ Codigo }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Placa do Veículo&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ placa }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Bruto&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_bruto }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Tara&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_tara }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Líquido&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_liquido }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Fazenda / Cliente&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ fazenda }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Motorista&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ motorista }}&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:postScript>instrucoes = []

for p in parceiros:
    if p["enum"] == parceiro:
        codigo_pn = f["enum"]
        nome_pn = f["title"]

for r in rsp_instrucoes:
    codigo_pn = str(r['seq_pla_endereco'])

    if codigo_pn == parceiro:
        seq_pla_instrucao = str(r['seq_pla_instrucao'])
        numero_instrucao = f"{str(r['nr_contrato'])} | {str(r['nr_instrucao'])}"
        instrucoes.append(
            {
                "type": "string",
                "enum": [
                    seq_pla_instrucao
                ],
                "title": numero_instrucao
            }
        )</spiffworkflow:postScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_17lfqtm</bpmn:incoming>
        <bpmn:outgoing>Flow_151zoq6</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:sequenceFlow id="Flow_1ehehpk" sourceRef="Activity_1tx4cxs" targetRef="Activity_1wr2atl" />
      <bpmn:userTask id="Activity_1tx4cxs" name="Selecionar Instrucao">
        <bpmn:extensionElements>
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="instrucao-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="instrucao-uischema.json" />
          </spiffworkflow:properties>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Romaneio de Entrada - Agronegócio&lt;/title&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
            --cinza-texto: #444;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 20px;
            background-color: #ffffff;
            color: var(--cinza-texto);
        }

        /* Cabeçalho em 3 Colunas (Código 1) */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border: 1px solid #c8e6c9;
            border-left: 10px solid var(--verde-escuro);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 25px;
        }

        .coluna {
            flex: 1;
            padding: 0 10px;
        }

        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae;
        }

        .label-topo {
            display: block;
            font-size: 0.75rem;
            color: #666;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .valor-topo {
            display: block;
            font-size: 1.15rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }

        /* Título e Subheader */
        .subheader {
            color: var(--verde-escuro);
            font-size: 1.5rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            padding-right: 50px;
            margin-bottom: 20px;
        }

        /* Tabela de Dados (Código 2 Estilizado) */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        th, td {
            border: 1px solid #e0e0e0;
            padding: 12px 15px;
            text-align: left;
        }

        th {
            background-color: var(--verde-escuro);
            color: white;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        tr:nth-child(even) {
            background-color: #fcfdfc;
        }

        tr:hover {
            background-color: #f1f8e9;
        }

        .campo-nome {
            font-weight: bold;
            color: var(--verde-agro);
            width: 30%;
        }

        .campo-valor {
            font-weight: 500;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Ticket Guardian&lt;/span&gt;
            &lt;span class="valor-topo" style="color: var(--verde-agro);"&gt;#{{Codigo}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Placa&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{placa}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Tipo Operação&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{Tipo_Operacao}}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;h2 class="subheader"&gt;Selecione o contrato/instrução:&lt;/h2&gt;
    &lt;table&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Campo&lt;/th&gt;
                &lt;th&gt;Valor Detalhado&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Código do Ticket&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ Codigo }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Placa do Veículo&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ placa }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Bruto&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_bruto }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Tara&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_tara }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Líquido&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_liquido }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Fazenda / Cliente&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ fazenda }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Motorista&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ motorista }}&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:postScript>for i in instrucoes:
    if i["enum"] == instrucao:
        seq_pla_instrucao = i["enum"]
        numero_instrucao = i["title"]
</spiffworkflow:postScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_151zoq6</bpmn:incoming>
        <bpmn:outgoing>Flow_1ehehpk</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:sequenceFlow id="Flow_0ozolji" sourceRef="Activity_1stgqhy" targetRef="Activity_08da8i1" />
      <bpmn:userTask id="Activity_1stgqhy" name="Classificação">
        <bpmn:extensionElements>
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="classificacao-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="classificacao-uischema.json" />
          </spiffworkflow:properties>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 20px;
            background-color: #ffffff;
        }
        /* Estrutura da Tabela/Grid */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border: 1px solid #c8e6c9;
            border-left: 10px solid var(--verde-escuro);
            padding: 15px;
            border-radius: 4px;
        }
       .coluna {
            flex: 1;
            padding: 0 10px;
        }
        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae; /* Divisória suave entre colunas */
        }
        .label {
            display: block;
            font-size: 0.75rem;
            color: #555;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }
        .valor {
            display: block;
            font-size: 1.15rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }
        /* Estilo do Subheader */
        .subheader {
            margin-top: 20px;
            color: var(--verde-escuro);
            font-size: 1.5rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            padding-right: 50px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label"&gt;Ticket Guardian&lt;/span&gt;
            &lt;span class="valor" style="color: var(--verde-agro);"&gt;#{{Codigo}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label"&gt;Placa&lt;/span&gt;
            &lt;span class="valor"&gt;{{placa}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label"&gt;Tipo Carga&lt;/span&gt;
            &lt;span class="valor"&gt;{{Tipo_Operacao}}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;h2 class="subheader"&gt;Classificação&lt;/h2&gt;

&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:preScript>numeroclassificacao = "0"</spiffworkflow:preScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_06xts44</bpmn:incoming>
        <bpmn:outgoing>Flow_0ozolji</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:sequenceFlow id="Flow_0ec1jog" sourceRef="Activity_0ykztz7" targetRef="Gateway_0p64io2" />
      <bpmn:exclusiveGateway id="Gateway_0iilj6f">
        <bpmn:incoming>Flow_1av3k3k</bpmn:incoming>
        <bpmn:incoming>Flow_13uhsp1</bpmn:incoming>
        <bpmn:outgoing>Flow_1rpq33w</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_1rpq33w" sourceRef="Gateway_0iilj6f" targetRef="Activity_0ykztz7" />
      <bpmn:exclusiveGateway id="Gateway_0p64io2" default="Flow_1agtqi8">
        <bpmn:incoming>Flow_0ec1jog</bpmn:incoming>
        <bpmn:outgoing>Flow_1agtqi8</bpmn:outgoing>
        <bpmn:outgoing>Flow_0ibmt2w</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_1agtqi8" sourceRef="Gateway_0p64io2" targetRef="Event_0i6duu6" />
      <bpmn:scriptTask id="Activity_0ykztz7" name="Envia para Unisystem">
        <bpmn:incoming>Flow_1rpq33w</bpmn:incoming>
        <bpmn:outgoing>Flow_0ec1jog</bpmn:outgoing>
        <bpmn:script>from connectordb.oracle import Oracle
from datetime import datetime
import json

usuarioLogado = get_current_user()['display_name']

connection = {
    "dsn": get_secret('oracleDsn'),
    "user": get_secret('oracleUser'),
    "password": get_secret('oraclePassword')
}

spiff_instancia = get_toplevel_process_info()['process_instance_id']
id_processo = get_current_task_info()['id']

# dataNota = None
# numeroNota = None
# serieNota = None
# quantidadeNota = None
# valorNota = None
seqPlaEndereco = None
seq_pla_contrato = None
seq_pla_instrucao_var = None
seq_pla_inst_embarque = None

for item in rsp_instrucoes:
    if (
        item.get("seq_pla_endereco") == parceiro
        and item.get("seq_pla_instrucao") == instrucao
    ):
        seq_pla_contrato = item.get("seq_pla_contrato")
        seq_pla_instrucao_var = item.get("seq_pla_instrucao")
        # no seu objeto o campo está como seq_pla_inst_embarque_comp
        seq_pla_inst_embarque = item.get("seq_pla_inst_embarque_comp")
        seq_pla_produto = item.get("seq_pla_produto")
        safra = item.get("cod_safra")
        break  # achou o registro, pode sair do loop


data_envio = datetime.now().strftime("%d/%m/%Y")
if not observacao:
    observacao = None

payload = {
    "pcodigo": Codigo,
    "pplacaveiculo": placa,
    "pplacacarreta": placa,
    "ptagassociado": None,
    "pmotorista": motorista,
    "ptalhoes": None,
    "pproduto": seq_pla_produto,
    "pbruto": peso_bruto,
    "ptara": peso_tara,
    "pliquido": peso_liquido,
    "ptipodocumento": "sg",
    "parmazem": armazem_unisystem,
    "pdata": data_envio,
    "psafra": safra,
    "pequipe": None,
    "pumidade": umidade,
    "pimpureza": impureza,
    "pavariados": avariados,
    "pquebrados": quebrados,
    "pardidos": ardidos,
    "poutros": outros,
    "pgraosverdes": graosverdes,
    "pnotaorigem": None,
    "pdataorigem": None,
    "pserieorigem": None,
    "pvalororigem": None,
    "pqtdeorigem": None,
    "pobservacao": observacao,
    "pordemcarregamento": None,
    "data_pesagem_inicial": data_pesagem_inicial,
    "data_pesagem_final": data_pesagem_final,
    "origem": group_identifier,
    "usuario": usuarioLogado.upper(),
    "numeroclassificacao": numeroclassificacao,
    "seqPlaContrato": seq_pla_contrato,
    "seqPlaInstrucao": seq_pla_instrucao_var,
    "seqPlaInstEmbarque": seq_pla_inst_embarque,
    "pserie": "  11574802",
    "pufplacaveiculo": "MT",
    "pTransportadora": codigo_transp, 
}

# payload2 = " ".join(payload.splitlines())

# payload3 = "{"+payload2+"}"

payload2 = json.dumps(payload)

payload_proc = [f"'{payload2}'"]

romaneio = Oracle(connection).callProc('zprocessaromaneio', id_processo, payload2)

code_proc, message_proc = romaneio

del(connection)</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:sequenceFlow id="Flow_0ibmt2w" sourceRef="Gateway_0p64io2" targetRef="Activity_1pdqo3i">
        <bpmn:conditionExpression>code_proc != 201</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_13uhsp1" sourceRef="Activity_1pdqo3i" targetRef="Gateway_0iilj6f" />
      <bpmn:manualTask id="Activity_1pdqo3i" name="Mensagem Erro">
        <bpmn:extensionElements>
          <spiffworkflow:instructionsForEndUser>&lt;div style="border: 1px solid #ffeeba; background-color: #fff3cd; color: #856404; padding: 20px; border-radius: 5px; margin: 20px 0;"&gt;
  &lt;h1 style="margin-top: 0;"&gt;Erro na inclusão do Romaneio&lt;/h1&gt;
  &lt;h3&gt;{{message_proc}}&lt;/h3&gt;
&lt;/div&gt;
</spiffworkflow:instructionsForEndUser>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0ibmt2w</bpmn:incoming>
        <bpmn:outgoing>Flow_13uhsp1</bpmn:outgoing>
      </bpmn:manualTask>
      <bpmn:userTask id="Activity_08da8i1" name="Conferência">
        <bpmn:extensionElements>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-BR"&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
&lt;title&gt;Ticket de Pesagem - Agribusiness&lt;/title&gt;
&lt;style&gt;
:root {
--verde-escuro: #1b5e20;
--verde-agro: #2e7d32;
--amarelo-safra: #fbc02d;
--fundo-leve: #f1f8e9;
--branco: #ffffff;
--cinza-borda: #ddd;
--azul-destaque: #0d47a1;
}
body {
font-family: 'Segoe UI', Arial, sans-serif;
background-color: #f4f4f4;
margin: 0;
padding: 20px;
color: #333;
}
.ticket-container {
max-width: 750px;
margin: 0 auto;
background-color: var(--branco);
border: 1px solid var(--cinza-borda);
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
border-radius: 8px;
overflow: hidden;
}
.container-topo {
display: flex;
justify-content: space-between;
align-items: center;
background-color: var(--fundo-leve);
border-bottom: 1px solid var(--cinza-borda);
border-left: 10px solid var(--verde-escuro);
padding: 20px;
}
.coluna {
flex: 1;
padding: 0 15px;
}
.coluna:not(:last-child) {
border-right: 1px solid #ccd5ae;
}
.label-topo {
display: block;
font-size: 0.7rem;
color: #666;
text-transform: uppercase;
font-weight: bold;
margin-bottom: 4px;
}
.valor-topo {
display: block;
font-size: 1.1rem;
color: var(--verde-escuro);
font-weight: 800;
}
.subheader-box {
padding: 20px 25px 0;
}
.subheader {
color: var(--verde-escuro);
font-size: 1.4rem;
font-weight: 700;
border-bottom: 3px solid var(--amarelo-safra);
display: inline-block;
margin-bottom: 15px;
text-transform: uppercase;
letter-spacing: 1px;
}
.ticket-content {
padding: 0 25px 25px;
}
.ticket-section {
margin-bottom: 15px;
border: 1px solid var(--cinza-borda);
padding: 15px;
border-radius: 6px;
background-color: #fcfdfc;
}
.section-title {
font-weight: bold;
margin-bottom: 10px;
color: var(--verde-escuro);
border-bottom: 1px solid #eee;
padding-bottom: 5px;
display: flex;
align-items: center;
gap: 8px;
}
.ticket-section p {
margin: 6px 0;
font-size: 14px;
display: flex;
}
.label {
font-weight: bold;
color: var(--verde-agro);
width: 160px;
display: inline-block;
}
.data-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
gap: 10px;
}
.classificacao-grid {
display: grid;
grid-template-columns: 1fr 1fr 1fr;
gap: 8px;
margin: 10px 0;
}
.classificacao-item {
border-bottom: 1px solid #eee;
padding: 4px 0;
display: flex;
justify-content: space-between;
font-size: 13px;
}
.peso-item {
display: flex;
justify-content: space-between;
padding: 5px 0;
border-bottom: 1px dashed #eee;
}
.ticket-summary {
text-align: center;
font-size: 24px;
font-weight: 900;
color: var(--verde-escuro);
background-color: var(--fundo-leve);
margin-top: 15px;
padding: 15px;
border-radius: 4px;
border: 2px solid var(--verde-agro);
}
.badge-blue {
color: var(--azul-destaque);
font-weight: bold;
}
@media print {
body { background: white; padding: 0; }
.ticket-container { box-shadow: none; border: 1px solid #000; max-width: 100%; }
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class="ticket-container"&gt;
&lt;div class="container-topo"&gt;
&lt;div class="coluna"&gt;
&lt;span class="label-topo"&gt;Código Pesagem&lt;/span&gt;
&lt;span class="valor-topo"&gt;#{{ payload_guardian.Codigo }}&lt;/span&gt;
&lt;/div&gt;
&lt;div class="coluna"&gt;
&lt;span class="label-topo"&gt;Placa Veículo&lt;/span&gt;
&lt;span class="valor-topo"&gt;{{ payload_guardian.PlacaVeiculo }}&lt;/span&gt;
&lt;/div&gt;
&lt;div class="coluna"&gt;
&lt;span class="label-topo"&gt;Nº Instrução&lt;/span&gt;
&lt;span class="valor-topo"&gt;{{ numero_instrucao | trim }}&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="subheader-box"&gt;
&lt;h2 class="subheader"&gt;Conferência antes de enviar para o Unisystem&lt;/h2&gt;
&lt;/div&gt;
&lt;div class="ticket-content"&gt;
&lt;div class="ticket-section"&gt;
&lt;div class="section-title"&gt;📄 Informações Gerais&lt;/div&gt;
&lt;p&gt;&lt;span class="label"&gt;Unidade:&lt;/span&gt;&lt;span&gt;{{ rsp_instrucao.descricao_filial }}&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class="label"&gt;Cliente:&lt;/span&gt;&lt;span&gt;{{ rsp_instrucao.nome_cliente }}&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class="label"&gt;Nº Contrato:&lt;/span&gt;&lt;span&gt;{{ numero_instrucao | trim }}&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class="label"&gt;Transportadora:&lt;/span&gt;&lt;span&gt;{{ nome_transp | trim }}&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class="label"&gt;Motorista:&lt;/span&gt;&lt;span&gt;{{ payload_guardian.motorista }}&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class="label"&gt;Produto:&lt;/span&gt;&lt;span&gt;{{ rsp_instrucao.descricao_produto }}&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="ticket-section"&gt;
&lt;div class="section-title"&gt;🌾 Classificação Técnica&lt;/div&gt;
&lt;p&gt;&lt;span class="label"&gt;Nº Classificação:&lt;/span&gt;&lt;span class="badge-blue"&gt;{{ '-' if numeroclassificacao == '0' or numeroclassificacao is none else numeroclassificacao }}&lt;/span&gt;&lt;/p&gt;
&lt;div class="classificacao-grid"&gt;
&lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Umidade:&lt;/span&gt;&lt;span&gt;{{ umidade }}%&lt;/span&gt;&lt;/div&gt;
&lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Impureza:&lt;/span&gt;&lt;span&gt;{{ impureza }}%&lt;/span&gt;&lt;/div&gt;
&lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Avariados:&lt;/span&gt;&lt;span&gt;{{ avariados }}%&lt;/span&gt;&lt;/div&gt;
&lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Quebrados:&lt;/span&gt;&lt;span&gt;{{ quebrados }}%&lt;/span&gt;&lt;/div&gt;
&lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Ardidos:&lt;/span&gt;&lt;span&gt;{{ ardidos }}%&lt;/span&gt;&lt;/div&gt;
&lt;div class="classificacao-item"&gt;&lt;span class="label" style="width: auto;"&gt;Grãos Verdes:&lt;/span&gt;&lt;span&gt;{{ graosverdes }}%&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;span class="label"&gt;Outros:&lt;/span&gt;&lt;span&gt;{{ outros }}%&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="ticket-section"&gt;
&lt;div class="section-title"&gt;⚖️ Dados da Pesagem&lt;/div&gt;
&lt;div class="peso-item"&gt;&lt;span class="label"&gt;Data Inicial:&lt;/span&gt;&lt;span&gt;{{ payload_guardian.data_pesagem_inicial }}&lt;/span&gt;&lt;/div&gt;
&lt;div class="peso-item"&gt;&lt;span class="label"&gt;Data Final:&lt;/span&gt;&lt;span&gt;{{ payload_guardian.data_pesagem_final }}&lt;/span&gt;&lt;/div&gt;
&lt;div class="peso-item"&gt;&lt;span class="label"&gt;Peso Bruto:&lt;/span&gt;&lt;span&gt;{{ payload_guardian.Bruto }} KG&lt;/span&gt;&lt;/div&gt;
&lt;div class="peso-item"&gt;&lt;span class="label"&gt;Peso Tara:&lt;/span&gt;&lt;span&gt;{{ payload_guardian.Tara }} KG&lt;/span&gt;&lt;/div&gt;
&lt;div class="ticket-summary"&gt;
LÍQUIDO: {{ payload_guardian.Liquido }} KG
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="ticket-section" style="background-color: #fff9c4; border-color: #fbc02d;"&gt;
&lt;p style="margin:0; font-size: 12px; color: #7f8c8d;"&gt;
&lt;strong&gt;Saldo Disponível (Contrato):&lt;/strong&gt;
{{ "{:,.2f}".format(rsp_instrucao.saldo | default(0)) | replace(",", "X") | replace(".", ",") | replace("X", ".") }} KG
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="conferencia-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="conferencia-uischema.json" />
          </spiffworkflow:properties>
          <spiffworkflow:preScript>for r in rsp_instrucoes:
    if r["seq_pla_instrucao"] == seq_pla_instrucao:
        rsp_instrucao = r</spiffworkflow:preScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0ozolji</bpmn:incoming>
        <bpmn:outgoing>Flow_1av3k3k</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:boundaryEvent id="Event_1kf20sr" attachedToRef="Activity_08da8i1">
        <bpmn:extensionElements>
          <spiffworkflow:signalButtonLabel>Corrigir Classificação</spiffworkflow:signalButtonLabel>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_1m4ap3y</bpmn:outgoing>
        <bpmn:signalEventDefinition id="SignalEventDefinition_1jmqa5q" signalRef="Corrigir_Classificacao" />
      </bpmn:boundaryEvent>
      <bpmn:sequenceFlow id="Flow_1m4ap3y" sourceRef="Event_1kf20sr" targetRef="Gateway_0z8u3h9" />
      <bpmn:exclusiveGateway id="Gateway_1lzb89o">
        <bpmn:incoming>Flow_02fcu7j</bpmn:incoming>
        <bpmn:incoming>Flow_095ipf4</bpmn:incoming>
        <bpmn:outgoing>Flow_17lfqtm</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:sequenceFlow id="Flow_17lfqtm" sourceRef="Gateway_1lzb89o" targetRef="Activity_17yvhbq" />
      <bpmn:boundaryEvent id="Event_0wh6sk7" attachedToRef="Activity_08da8i1">
        <bpmn:extensionElements>
          <spiffworkflow:signalButtonLabel>Corrigir Parceiro/Instrução</spiffworkflow:signalButtonLabel>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_02fcu7j</bpmn:outgoing>
        <bpmn:signalEventDefinition id="SignalEventDefinition_1fv1nnt" signalRef="Corrigir_Romaneio" />
      </bpmn:boundaryEvent>
      <bpmn:sequenceFlow id="Flow_02fcu7j" sourceRef="Event_0wh6sk7" targetRef="Gateway_1lzb89o" />
      <bpmn:sequenceFlow id="Flow_07om7y9" sourceRef="Activity_1wr2atl" targetRef="Gateway_0z8u3h9" />
      <bpmn:userTask id="Activity_1wr2atl" name="Selecionar Transportadora">
        <bpmn:extensionElements>
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="transportadora-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="transportadora-uischema.json" />
          </spiffworkflow:properties>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Romaneio de Entrada - Agronegócio&lt;/title&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
            --cinza-texto: #444;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 20px;
            background-color: #ffffff;
            color: var(--cinza-texto);
        }

        /* Cabeçalho em 3 Colunas (Código 1) */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border: 1px solid #c8e6c9;
            border-left: 10px solid var(--verde-escuro);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 25px;
        }

        .coluna {
            flex: 1;
            padding: 0 10px;
        }

        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae;
        }

        .label-topo {
            display: block;
            font-size: 0.75rem;
            color: #666;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .valor-topo {
            display: block;
            font-size: 1.15rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }

        /* Título e Subheader */
        .subheader {
            color: var(--verde-escuro);
            font-size: 1.5rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            padding-right: 50px;
            margin-bottom: 20px;
        }

        /* Tabela de Dados (Código 2 Estilizado) */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        th, td {
            border: 1px solid #e0e0e0;
            padding: 12px 15px;
            text-align: left;
        }

        th {
            background-color: var(--verde-escuro);
            color: white;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        tr:nth-child(even) {
            background-color: #fcfdfc;
        }

        tr:hover {
            background-color: #f1f8e9;
        }

        .campo-nome {
            font-weight: bold;
            color: var(--verde-agro);
            width: 30%;
        }

        .campo-valor {
            font-weight: 500;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Ticket Guardian&lt;/span&gt;
            &lt;span class="valor-topo" style="color: var(--verde-agro);"&gt;#{{Codigo}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Placa&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{placa}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Tipo Operação&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{Tipo_Operacao}}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;h2 class="subheader"&gt;Selecione a transportadora:&lt;/h2&gt;
    &lt;table&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Campo&lt;/th&gt;
                &lt;th&gt;Valor Detalhado&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Código do Ticket&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ Codigo }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Placa do Veículo&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ placa }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Bruto&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_bruto }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Tara&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_tara }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Líquido&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_liquido }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Fazenda / Cliente&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ fazenda }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Motorista&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ motorista }}&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:postScript># 1. Converte a string JSON para um dicionário Python
transp = json.loads(transp)

codigo_transp = transp["codigo_transp"]
nome_transp = transp["nome_transp"]

del(transportadoras)</spiffworkflow:postScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1ehehpk</bpmn:incoming>
        <bpmn:outgoing>Flow_07om7y9</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:sequenceFlow id="Flow_095ipf4" sourceRef="Activity_1knxsgc" targetRef="Gateway_1lzb89o" />
      <bpmn:callActivity id="Activity_1knxsgc" name="Atualiza Transportadora" calledElement="transportadoras">
        <bpmn:incoming>Flow_1hzqs8s</bpmn:incoming>
        <bpmn:outgoing>Flow_095ipf4</bpmn:outgoing>
      </bpmn:callActivity>
    </bpmn:subProcess>
    <bpmn:subProcess id="Activity_Rom_Entrada_Terceiros" name="Romaneio de Entrada Terceiros">
      <bpmn:extensionElements>
        <spiffworkflow:postScript>usuarioLogado = get_current_user()['display_name']</spiffworkflow:postScript>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1hlomz4</bpmn:incoming>
      <bpmn:outgoing>Flow_06cpprz</bpmn:outgoing>
      <bpmn:startEvent id="Event_1sn17ck">
        <bpmn:outgoing>Flow_10873xt</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:callActivity id="Activity_1mlqka7" name="Define filial e armazem" calledElement="Process_definir_unidade_e_departamento_zxer6t3">
        <bpmn:extensionElements>
          <spiffworkflow:preScript>usuarioLogado = get_current_user()['display_name']
</spiffworkflow:preScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_10873xt</bpmn:incoming>
        <bpmn:outgoing>Flow_1tkaxx6</bpmn:outgoing>
      </bpmn:callActivity>
      <bpmn:scriptTask id="Activity_0b7wckt" name="Atualiza Tabelas">
        <bpmn:extensionElements>
          <spiffworkflow:instructionsForEndUser />
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1tkaxx6</bpmn:incoming>
        <bpmn:outgoing>Flow_00yjfhe</bpmn:outgoing>
        <bpmn:script>from connectordb.oracle import Oracle
from datetime import datetime

connection = {
    "dsn": get_secret('oracleDsn'),
    "user": get_secret('oracleUser'),
    "password": get_secret('oraclePassword')
}

#Busca Filiais
filiais_unisystem = ", ".join("'" + str(item) + "'" for item in filiais_unisystem)

query = f"SELECT * FROM ZVW_NEG_ARMAZENS avc WHERE avc.COD_SAFRA &gt;= 16 and COD_FILIAL IN ({filiais_unisystem})"
rsp_negociacoes = Oracle(connection).selectDb(query)
parceiros = []

for r in rsp_negociacoes:
    codigo_pn = str(r['seq_pla_endereco'])
    nome_pn = str(r['nome_cliente'])
    parceiros.append(
        {
            "type": "string",
            "enum": [
                codigo_pn
            ],
            "title": nome_pn
        }
    )

#Busca Series
query_series = f"""
            SELECT SEQ_PLA_SERIE, SERIE FROM SERIES ORDER BY SERIE
          """

rsp_series = Oracle(connection).selectDb(query_series)

series_list = []

for r in rsp_series:
    seq_pla_serie = str(r['seq_pla_serie'])
    serie = str(r['serie'])
    series_list.append(
        {
            "type": "string",
            "enum": [
                seq_pla_serie
            ],
            "title": serie
        }
    )

del(rsp_series)
del(query_series)
del(connection)
del(query)</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:exclusiveGateway id="Gateway_0fp7sly">
        <bpmn:incoming>Flow_00yjfhe</bpmn:incoming>
        <bpmn:incoming>Flow_0ec7okk</bpmn:incoming>
        <bpmn:outgoing>Flow_0jqo6ob</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:endEvent id="Event_1k2vf8p">
        <bpmn:incoming>Flow_1jx1s8k</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:userTask id="Activity_0r8ommc" name="Selecionar Parceiro de Negócio">
        <bpmn:extensionElements>
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="parceiro-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="parceiro-uischema.json" />
          </spiffworkflow:properties>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Romaneio de Entrada - Agronegócio&lt;/title&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
            --cinza-texto: #444;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 20px;
            background-color: #ffffff;
            color: var(--cinza-texto);
        }

        /* Cabeçalho em 3 Colunas (Código 1) */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border: 1px solid #c8e6c9;
            border-left: 10px solid var(--verde-escuro);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 25px;
        }

        .coluna {
            flex: 1;
            padding: 0 10px;
        }

        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae;
        }

        .label-topo {
            display: block;
            font-size: 0.75rem;
            color: #666;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .valor-topo {
            display: block;
            font-size: 1.15rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }

        /* Título e Subheader */
        .subheader {
            color: var(--verde-escuro);
            font-size: 1.5rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            padding-right: 50px;
            margin-bottom: 20px;
        }

        /* Tabela de Dados (Código 2 Estilizado) */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        th, td {
            border: 1px solid #e0e0e0;
            padding: 12px 15px;
            text-align: left;
        }

        th {
            background-color: var(--verde-escuro);
            color: white;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        tr:nth-child(even) {
            background-color: #fcfdfc;
        }

        tr:hover {
            background-color: #f1f8e9;
        }

        .campo-nome {
            font-weight: bold;
            color: var(--verde-agro);
            width: 30%;
        }

        .campo-valor {
            font-weight: 500;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Ticket Guardian&lt;/span&gt;
            &lt;span class="valor-topo" style="color: var(--verde-agro);"&gt;#{{Codigo}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Placa&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{placa}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Tipo Operação&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{Tipo_Operacao}}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;h2 class="subheader"&gt;Selecione o parceiro de negócio:&lt;/h2&gt;
    &lt;table&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Campo&lt;/th&gt;
                &lt;th&gt;Valor Detalhado&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Código do Ticket&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ Codigo }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Placa do Veículo&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ placa }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Bruto&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_bruto }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Tara&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_tara }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Líquido&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_liquido }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Fazenda / Cliente&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ fazenda }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Motorista&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ motorista }}&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:postScript>negociacao = []

for p in parceiros:
    if p["enum"] == parceiro:
        codigo_pn = p["enum"]
        nome_pn = p["title"]

for n in rsp_negociacoes:
    codigo_pn = n['seq_pla_endereco']

    if codigo_pn == parceiro:
        seq_pla_negociacao = n['seq_pla_endereco']
        numero_negociacao = f"{str(n['nr_negociacao'])}"
        negociacao = n

n = negociacao</spiffworkflow:postScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0jqo6ob</bpmn:incoming>
        <bpmn:outgoing>Flow_0tylbkf</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:userTask id="Activity_0v47qb9" name="Classificação">
        <bpmn:extensionElements>
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="classificacao-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="classificacao-uischema.json" />
          </spiffworkflow:properties>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Romaneio de Entrada - Agronegócio&lt;/title&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
            --cinza-texto: #444;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 20px;
            background-color: #ffffff;
            color: var(--cinza-texto);
        }

        /* Cabeçalho em 3 Colunas (Código 1) */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border: 1px solid #c8e6c9;
            border-left: 10px solid var(--verde-escuro);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 25px;
        }

        .coluna {
            flex: 1;
            padding: 0 10px;
        }

        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae;
        }

        .label-topo {
            display: block;
            font-size: 0.75rem;
            color: #666;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .valor-topo {
            display: block;
            font-size: 1.15rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }

        /* Título e Subheader */
        .subheader {
            color: var(--verde-escuro);
            font-size: 1.5rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            padding-right: 50px;
            margin-bottom: 20px;
        }

        /* Tabela de Dados (Código 2 Estilizado) */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        th, td {
            border: 1px solid #e0e0e0;
            padding: 12px 15px;
            text-align: left;
        }

        th {
            background-color: var(--verde-escuro);
            color: white;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        tr:nth-child(even) {
            background-color: #fcfdfc;
        }

        tr:hover {
            background-color: #f1f8e9;
        }

        .campo-nome {
            font-weight: bold;
            color: var(--verde-agro);
            width: 30%;
        }

        .campo-valor {
            font-weight: 500;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Ticket Guardian&lt;/span&gt;
            &lt;span class="valor-topo" style="color: var(--verde-agro);"&gt;#{{Codigo}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Placa&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{placa}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Tipo Operação&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{Tipo_Operacao}}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;h2 class="subheader"&gt;Classificação da carga&lt;/h2&gt;
&lt;/body&gt;
&lt;/html&gt;
</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:preScript>numeroclassificacao = "0"</spiffworkflow:preScript>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0p5q0hg</bpmn:incoming>
        <bpmn:outgoing>Flow_1yydfbh</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:exclusiveGateway id="Gateway_0zg8ctn">
        <bpmn:incoming>Flow_0g85bus</bpmn:incoming>
        <bpmn:incoming>Flow_1ip73co</bpmn:incoming>
        <bpmn:outgoing>Flow_1fwoeln</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:exclusiveGateway id="Gateway_1pnfukq" default="Flow_1jx1s8k">
        <bpmn:incoming>Flow_12s5qaq</bpmn:incoming>
        <bpmn:outgoing>Flow_1jx1s8k</bpmn:outgoing>
        <bpmn:outgoing>Flow_0pro2a0</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:scriptTask id="Activity_1e9b00h" name="Envia para Unisystem">
        <bpmn:incoming>Flow_1fwoeln</bpmn:incoming>
        <bpmn:outgoing>Flow_12s5qaq</bpmn:outgoing>
        <bpmn:script>from connectordb.oracle import Oracle
from datetime import datetime
import json

usuarioLogado = get_current_user()['display_name']

connection = {
    "dsn": get_secret('oracleDsn'),
    "user": get_secret('oracleUser'),
    "password": get_secret('oraclePassword')
}

spiff_instancia = get_toplevel_process_info()['process_instance_id']
id_processo = get_current_task_info()['id']

data_envio = datetime.now().strftime("%d/%m/%Y")
if not observacao:
    observacao = None

payload = {
    "pcodigo": Codigo,
    "pplacaveiculo": placa,
    "pplacacarreta": placa,
    "ptagassociado": None,
    "pmotorista": motorista,
    "ptalhoes": None,
    "pproduto": n["seq_pla_produto"],
    "pbruto": peso_bruto,
    "ptara": peso_tara,
    "pliquido": peso_liquido,
    "ptipodocumento": "osg",
    "parmazem": n["seq_pla_armazem"],
    "pdata": data_envio,
    "psafra": n["cod_safra"],
    "pequipe": None,
    "pumidade": umidade,
    "pimpureza": impureza,
    "pavariados": avariados,
    "pquebrados": quebrados,
    "pardidos": ardidos,
    "poutros": outros,
    "pgraosverdes": graosverdes,
    "pnotaorigem": numeroNota,
    "pdataorigem": dataNota,
    "pserieorigem": serieNota,
    "pvalororigem": valorNota,
    "pqtdeorigem": quantidadeNota,
    "pobservacao": observacao,
    "pordemcarregamento": None,
    "data_pesagem_inicial": data_pesagem_inicial,
    "data_pesagem_final": data_pesagem_final,
    "origem": group_identifier,
    "usuario": usuarioLogado.upper(),
    "numeroclassificacao": numeroclassificacao,
    "pnegociacao": n["seq_pla_neg_fazenda"]
}

# payload2 = " ".join(payload.splitlines())

# payload3 = "{"+payload2+"}"

payload = json.dumps(payload)

payload_proc = [f"'{payload}'"]

romaneio = Oracle(connection).callProc('zprocessaromaneio', id_processo, payload)

code_proc, message_proc = romaneio</bpmn:script>
      </bpmn:scriptTask>
      <bpmn:manualTask id="Activity_0lly3rg" name="Mensagem Erro">
        <bpmn:extensionElements>
          <spiffworkflow:instructionsForEndUser>&lt;div style="border: 1px solid #ffeeba; background-color: #fff3cd; color: #856404; padding: 20px; border-radius: 5px; margin: 20px 0;"&gt;
  &lt;h1 style="margin-top: 0;"&gt;Erro na inclusão do Romaneio&lt;/h1&gt;
  &lt;h3&gt;{{message_proc}}&lt;/h3&gt;
&lt;/div&gt;
</spiffworkflow:instructionsForEndUser>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_0pro2a0</bpmn:incoming>
        <bpmn:outgoing>Flow_0g85bus</bpmn:outgoing>
      </bpmn:manualTask>
      <bpmn:exclusiveGateway id="Gateway_19fgcql" default="Flow_14mcx1l">
        <bpmn:incoming>Flow_0tylbkf</bpmn:incoming>
        <bpmn:incoming>Flow_1er5he8</bpmn:incoming>
        <bpmn:outgoing>Flow_14mcx1l</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:exclusiveGateway id="Gateway_0fvv8hb">
        <bpmn:incoming>Flow_0cubujn</bpmn:incoming>
        <bpmn:incoming>Flow_0f2d8jg</bpmn:incoming>
        <bpmn:outgoing>Flow_0p5q0hg</bpmn:outgoing>
      </bpmn:exclusiveGateway>
      <bpmn:userTask id="Activity_0uf9shd" name="Nota Fiscal">
        <bpmn:extensionElements>
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="nota-fiscal-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="nota-fiscal-uischema.json" />
          </spiffworkflow:properties>
          <spiffworkflow:postScript>
from datetime import datetime

# Converter para objeto datetime
dataNota = datetime.strptime(dataNota, "%Y-%m-%d").strftime("%d/%m/%Y")</spiffworkflow:postScript>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Romaneio de Entrada - Agronegócio&lt;/title&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
            --cinza-texto: #444;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 20px;
            background-color: #ffffff;
            color: var(--cinza-texto);
        }

        /* Cabeçalho em 3 Colunas (Código 1) */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border: 1px solid #c8e6c9;
            border-left: 10px solid var(--verde-escuro);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 25px;
        }

        .coluna {
            flex: 1;
            padding: 0 10px;
        }

        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae;
        }

        .label-topo {
            display: block;
            font-size: 0.75rem;
            color: #666;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .valor-topo {
            display: block;
            font-size: 1.15rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }

        /* Título e Subheader */
        .subheader {
            color: var(--verde-escuro);
            font-size: 1.5rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            padding-right: 50px;
            margin-bottom: 20px;
        }

        /* Tabela de Dados (Código 2 Estilizado) */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        th, td {
            border: 1px solid #e0e0e0;
            padding: 12px 15px;
            text-align: left;
        }

        th {
            background-color: var(--verde-escuro);
            color: white;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        tr:nth-child(even) {
            background-color: #fcfdfc;
        }

        tr:hover {
            background-color: #f1f8e9;
        }

        .campo-nome {
            font-weight: bold;
            color: var(--verde-agro);
            width: 30%;
        }

        .campo-valor {
            font-weight: 500;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Ticket Guardian&lt;/span&gt;
            &lt;span class="valor-topo" style="color: var(--verde-agro);"&gt;#{{Codigo}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Placa&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{placa}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Tipo Operação&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{Tipo_Operacao}}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;h2 class="subheader"&gt;Dados da NFe:&lt;/h2&gt;
&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_14mcx1l</bpmn:incoming>
        <bpmn:outgoing>Flow_0cubujn</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:sequenceFlow id="Flow_10873xt" sourceRef="Event_1sn17ck" targetRef="Activity_1mlqka7" />
      <bpmn:sequenceFlow id="Flow_1tkaxx6" sourceRef="Activity_1mlqka7" targetRef="Activity_0b7wckt" />
      <bpmn:sequenceFlow id="Flow_00yjfhe" sourceRef="Activity_0b7wckt" targetRef="Gateway_0fp7sly" />
      <bpmn:sequenceFlow id="Flow_0jqo6ob" sourceRef="Gateway_0fp7sly" targetRef="Activity_0r8ommc" />
      <bpmn:sequenceFlow id="Flow_1jx1s8k" sourceRef="Gateway_1pnfukq" targetRef="Event_1k2vf8p" />
      <bpmn:sequenceFlow id="Flow_0tylbkf" sourceRef="Activity_0r8ommc" targetRef="Gateway_19fgcql" />
      <bpmn:sequenceFlow id="Flow_0p5q0hg" sourceRef="Gateway_0fvv8hb" targetRef="Activity_0v47qb9" />
      <bpmn:sequenceFlow id="Flow_1yydfbh" sourceRef="Activity_0v47qb9" targetRef="Activity_04vfgh9" />
      <bpmn:sequenceFlow id="Flow_0g85bus" sourceRef="Activity_0lly3rg" targetRef="Gateway_0zg8ctn" />
      <bpmn:sequenceFlow id="Flow_1fwoeln" sourceRef="Gateway_0zg8ctn" targetRef="Activity_1e9b00h" />
      <bpmn:sequenceFlow id="Flow_12s5qaq" sourceRef="Activity_1e9b00h" targetRef="Gateway_1pnfukq" />
      <bpmn:sequenceFlow id="Flow_0pro2a0" sourceRef="Gateway_1pnfukq" targetRef="Activity_0lly3rg">
        <bpmn:conditionExpression>code_proc != 201</bpmn:conditionExpression>
      </bpmn:sequenceFlow>
      <bpmn:sequenceFlow id="Flow_14mcx1l" sourceRef="Gateway_19fgcql" targetRef="Activity_0uf9shd" />
      <bpmn:sequenceFlow id="Flow_0cubujn" sourceRef="Activity_0uf9shd" targetRef="Gateway_0fvv8hb" />
      <bpmn:sequenceFlow id="Flow_1ip73co" sourceRef="Activity_04vfgh9" targetRef="Gateway_0zg8ctn" />
      <bpmn:userTask id="Activity_04vfgh9" name="Conferência">
        <bpmn:extensionElements>
          <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-BR"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Ticket de Pesagem - Agribusiness&lt;/title&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
            --branco: #ffffff;
            --cinza-borda: #ddd;
            --azul-destaque: #0d47a1;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            color: #333;
            /* Garante que as cores de fundo saiam na impressão/PDF */
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }

        .ticket-container {
            max-width: 750px;
            margin: 0 auto;
            background-color: var(--branco);
            border: 1px solid var(--cinza-borda);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border-bottom: 1px solid var(--cinza-borda);
            border-left: 10px solid var(--verde-escuro);
            padding: 20px;
        }

        .coluna {
            flex: 1;
            padding: 0 15px;
        }

        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae;
        }

        .label-topo {
            display: block;
            font-size: 0.7rem;
            color: #666;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .valor-topo {
            display: block;
            font-size: 1.1rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }

        .subheader-box {
            padding: 20px 25px 0;
        }

        .subheader {
            color: var(--verde-escuro);
            font-size: 1.4rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .ticket-content {
            padding: 0 25px 25px;
        }

        .ticket-section {
            margin-bottom: 15px;
            border: 1px solid var(--cinza-borda);
            padding: 15px;
            border-radius: 6px;
            background-color: #fcfdfc;
        }

        .section-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--verde-escuro);
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ticket-section p {
            margin: 6px 0;
            font-size: 14px;
            display: flex;
        }

        .label {
            font-weight: bold;
            color: var(--verde-agro);
            width: 160px;
            display: inline-block;
        }

        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
        }

        .classificacao-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin: 10px 0;
        }

        .classificacao-item {
            border-bottom: 1px solid #eee;
            padding: 4px 0;
            display: flex;
            justify-content: space-between;
            font-size: 13px;
        }

        /* Classe utilitária para labels dentro do grid que precisam ser fluidos */
        .label-grid {
            font-weight: bold;
            color: var(--verde-agro);
            width: auto; 
        }

        .peso-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px dashed #eee;
        }

        .ticket-summary {
            text-align: center;
            font-size: 24px;
            font-weight: 900;
            color: var(--verde-escuro);
            background-color: var(--fundo-leve);
            margin-top: 15px;
            padding: 15px;
            border-radius: 4px;
            border: 2px solid var(--verde-agro);
        }

        .badge-blue {
            color: var(--azul-destaque);
            font-weight: bold;
        }

        @media print {
            body { background: white; padding: 0; }
            .ticket-container { box-shadow: none; border: 1px solid #000; max-width: 100%; }
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div class="ticket-container"&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Código Pesagem&lt;/span&gt;
            &lt;span class="valor-topo"&gt;#{{ payload_guardian.Codigo }}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Placa Veículo&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{ payload_guardian.PlacaVeiculo }}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Nº Instrução&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{ n.nr_negociacao | trim }}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="subheader-box"&gt;
        &lt;h2 class="subheader"&gt;Conferência antes de enviar para o Unisystem&lt;/h2&gt;
    &lt;/div&gt;
    &lt;div class="ticket-content"&gt;
        &lt;div class="ticket-section"&gt;
            &lt;div class="section-title"&gt;📄 Informações Gerais&lt;/div&gt;
            &lt;p&gt;&lt;span class="label"&gt;Unidade:&lt;/span&gt;&lt;span&gt;{{ n.desc_fazenda}}&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;&lt;span class="label"&gt;Cliente:&lt;/span&gt;&lt;span&gt;{{ n.nome_cliente }}&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;&lt;span class="label"&gt;Nº Negociação:&lt;/span&gt;&lt;span&gt;{{ n.nr_negociacao | trim }}&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;&lt;span class="label"&gt;Motorista:&lt;/span&gt;&lt;span&gt;{{ payload_guardian.motorista }}&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;&lt;span class="label"&gt;Produto:&lt;/span&gt;&lt;span&gt;{{ n.descricao_produto }}&lt;/span&gt;&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="ticket-section"&gt;
            &lt;div class="section-title"&gt;🌾 Classificação Técnica&lt;/div&gt;
            &lt;p&gt;&lt;span class="label"&gt;Nº Classificação:&lt;/span&gt;&lt;span class="badge-blue"&gt;{{ '-' if numeroclassificacao == '0' or numeroclassificacao is none else numeroclassificacao }}&lt;/span&gt;&lt;/p&gt;
            &lt;div class="classificacao-grid"&gt;
                &lt;div class="classificacao-item"&gt;
                    &lt;span class="label-grid"&gt;Umidade:&lt;/span&gt;
                    &lt;span&gt;{{ umidade }}%&lt;/span&gt;
                &lt;/div&gt;
                &lt;div class="classificacao-item"&gt;
                    &lt;span class="label-grid"&gt;Impureza:&lt;/span&gt;
                    &lt;span&gt;{{ impureza }}%&lt;/span&gt;
                &lt;/div&gt;
                &lt;div class="classificacao-item"&gt;
                    &lt;span class="label-grid"&gt;Avariados:&lt;/span&gt;
                    &lt;span&gt;{{ avariados }}%&lt;/span&gt;
                &lt;/div&gt;
                &lt;div class="classificacao-item"&gt;
                    &lt;span class="label-grid"&gt;Quebrados:&lt;/span&gt;
                    &lt;span&gt;{{ quebrados }}%&lt;/span&gt;
                &lt;/div&gt;
                &lt;div class="classificacao-item"&gt;
                    &lt;span class="label-grid"&gt;Ardidos:&lt;/span&gt;
                    &lt;span&gt;{{ ardidos }}%&lt;/span&gt;
                &lt;/div&gt;
                &lt;div class="classificacao-item"&gt;
                    &lt;span class="label-grid"&gt;Grãos Verdes:&lt;/span&gt;
                    &lt;span&gt;{{ graosverdes }}%&lt;/span&gt;
                &lt;/div&gt;
                &lt;div class="classificacao-item"&gt;
                    &lt;span class="label-grid"&gt;Outros:&lt;/span&gt;
                    &lt;span&gt;{{ outros }}%&lt;/span&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="ticket-section"&gt;
            &lt;div class="section-title"&gt;⚖️ Dados da Pesagem&lt;/div&gt;
            &lt;div class="peso-item"&gt;&lt;span class="label"&gt;Data Inicial:&lt;/span&gt;&lt;span&gt;{{ payload_guardian.data_pesagem_inicial }}&lt;/span&gt;&lt;/div&gt;
            &lt;div class="peso-item"&gt;&lt;span class="label"&gt;Data Final:&lt;/span&gt;&lt;span&gt;{{ payload_guardian.data_pesagem_final }}&lt;/span&gt;&lt;/div&gt;
            &lt;div class="peso-item"&gt;&lt;span class="label"&gt;Peso Bruto:&lt;/span&gt;&lt;span&gt;{{ payload_guardian.Bruto }} KG&lt;/span&gt;&lt;/div&gt;
            &lt;div class="peso-item"&gt;&lt;span class="label"&gt;Peso Tara:&lt;/span&gt;&lt;span&gt;{{ payload_guardian.Tara }} KG&lt;/span&gt;&lt;/div&gt;
            &lt;div class="ticket-summary"&gt;
                LÍQUIDO: {{ payload_guardian.Liquido }} KG
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
          <spiffworkflow:postScript />
          <spiffworkflow:properties>
            <spiffworkflow:property name="formJsonSchemaFilename" value="conferencia-schema.json" />
            <spiffworkflow:property name="formUiSchemaFilename" value="conferencia-uischema.json" />
          </spiffworkflow:properties>
        </bpmn:extensionElements>
        <bpmn:incoming>Flow_1yydfbh</bpmn:incoming>
        <bpmn:outgoing>Flow_1ip73co</bpmn:outgoing>
      </bpmn:userTask>
      <bpmn:boundaryEvent id="Event_0xqpatd" attachedToRef="Activity_04vfgh9">
        <bpmn:extensionElements>
          <spiffworkflow:signalButtonLabel>Corrige Classificação</spiffworkflow:signalButtonLabel>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_0f2d8jg</bpmn:outgoing>
        <bpmn:signalEventDefinition id="SignalEventDefinition_0hbk3ob" signalRef="Corrigir_Classificacao" />
      </bpmn:boundaryEvent>
      <bpmn:sequenceFlow id="Flow_0f2d8jg" sourceRef="Event_0xqpatd" targetRef="Gateway_0fvv8hb" />
      <bpmn:boundaryEvent id="Event_0j8vafm" attachedToRef="Activity_04vfgh9">
        <bpmn:extensionElements>
          <spiffworkflow:signalButtonLabel>Corrige PN</spiffworkflow:signalButtonLabel>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_0ec7okk</bpmn:outgoing>
        <bpmn:signalEventDefinition id="SignalEventDefinition_1x98d8z" signalRef="Corrigir_Romaneio" />
      </bpmn:boundaryEvent>
      <bpmn:sequenceFlow id="Flow_0ec7okk" sourceRef="Event_0j8vafm" targetRef="Gateway_0fp7sly" />
      <bpmn:boundaryEvent id="Event_0hvzf3x" attachedToRef="Activity_04vfgh9">
        <bpmn:extensionElements>
          <spiffworkflow:signalButtonLabel>Corrige NFe</spiffworkflow:signalButtonLabel>
        </bpmn:extensionElements>
        <bpmn:outgoing>Flow_1er5he8</bpmn:outgoing>
        <bpmn:signalEventDefinition id="SignalEventDefinition_0vyba8l" signalRef="Signal_NFe" />
      </bpmn:boundaryEvent>
      <bpmn:sequenceFlow id="Flow_1er5he8" sourceRef="Event_0hvzf3x" targetRef="Gateway_19fgcql" />
    </bpmn:subProcess>
    <bpmn:sequenceFlow id="Flow_013r7wx" sourceRef="Activity_0ilhvov" targetRef="Activity_1musc35" />
    <bpmn:sequenceFlow id="Flow_1c2rh6k" sourceRef="Activity_1musc35" targetRef="Gateway_1m3w1tw" />
    <bpmn:sequenceFlow id="Flow_0udm8qs" sourceRef="Event_0k0zfjf" targetRef="Activity_0ilhvov" />
    <bpmn:sequenceFlow id="Flow_1t416f5" sourceRef="Gateway_1m3w1tw" targetRef="Activity_Romaneio_Proprio">
      <bpmn:conditionExpression>Tipo_Operacao == "Colheita"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_18dhnb8" sourceRef="Gateway_1m3w1tw" targetRef="Gateway_0c7i1yo" />
    <bpmn:sequenceFlow id="Flow_1hlomz4" sourceRef="Gateway_1m3w1tw" targetRef="Activity_Rom_Entrada_Terceiros">
      <bpmn:documentation>.</bpmn:documentation>
      <bpmn:conditionExpression>Tipo_Operacao == "Colheita Terceiros"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_11taq3a" sourceRef="Gateway_1m3w1tw" targetRef="Activity_Carregamento">
      <bpmn:conditionExpression>Tipo_Operacao == "Carregamento"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0w47m79" sourceRef="Gateway_1m3w1tw" targetRef="Activity_0tlv0ji">
      <bpmn:conditionExpression>Tipo_Operacao == "Colaborador/Visita"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_19ioriy" sourceRef="Gateway_1m3w1tw" targetRef="Activity_0omwooq">
      <bpmn:conditionExpression>Tipo_Operacao == "Cancela Pesagem"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1ungm5p" sourceRef="Gateway_0c7i1yo" targetRef="Event_1bn9d93" />
    <bpmn:sequenceFlow id="Flow_12ywuln" sourceRef="Activity_Romaneio_Proprio" targetRef="Gateway_0c7i1yo" />
    <bpmn:sequenceFlow id="Flow_118mmlb" sourceRef="Activity_Carregamento" targetRef="Gateway_0c7i1yo" />
    <bpmn:sequenceFlow id="Flow_06cpprz" sourceRef="Activity_Rom_Entrada_Terceiros" targetRef="Gateway_0c7i1yo" />
    <bpmn:sequenceFlow id="Flow_0gsov0c" sourceRef="Activity_0tlv0ji" targetRef="Gateway_0c7i1yo" />
    <bpmn:sequenceFlow id="Flow_00j5498" sourceRef="Activity_0omwooq" targetRef="Gateway_0c7i1yo" />
    <bpmn:userTask id="Activity_1musc35" name="Verifica Dados do Guardian">
      <bpmn:extensionElements>
        <spiffworkflow:instructionsForEndUser>&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Romaneio de Entrada - Agronegócio&lt;/title&gt;
    &lt;style&gt;
        :root {
            --verde-escuro: #1b5e20;
            --verde-agro: #2e7d32;
            --amarelo-safra: #fbc02d;
            --fundo-leve: #f1f8e9;
            --cinza-texto: #444;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 20px;
            background-color: #ffffff;
            color: var(--cinza-texto);
        }

        /* Cabeçalho em 3 Colunas (Código 1) */
        .container-topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--fundo-leve);
            border: 1px solid #c8e6c9;
            border-left: 10px solid var(--verde-escuro);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 25px;
        }

        .coluna {
            flex: 1;
            padding: 0 10px;
        }

        .coluna:not(:last-child) {
            border-right: 1px solid #ccd5ae;
        }

        .label-topo {
            display: block;
            font-size: 0.75rem;
            color: #666;
            text-transform: uppercase;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .valor-topo {
            display: block;
            font-size: 1.15rem;
            color: var(--verde-escuro);
            font-weight: 800;
        }

        /* Título e Subheader */
        .subheader {
            color: var(--verde-escuro);
            font-size: 1.5rem;
            font-weight: 700;
            border-bottom: 3px solid var(--amarelo-safra);
            display: inline-block;
            padding-right: 50px;
            margin-bottom: 20px;
        }

        /* Tabela de Dados (Código 2 Estilizado) */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        th, td {
            border: 1px solid #e0e0e0;
            padding: 12px 15px;
            text-align: left;
        }

        th {
            background-color: var(--verde-escuro);
            color: white;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        tr:nth-child(even) {
            background-color: #fcfdfc;
        }

        tr:hover {
            background-color: #f1f8e9;
        }

        .campo-nome {
            font-weight: bold;
            color: var(--verde-agro);
            width: 30%;
        }

        .campo-valor {
            font-weight: 500;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container-topo"&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Ticket Guardian&lt;/span&gt;
            &lt;span class="valor-topo" style="color: var(--verde-agro);"&gt;#{{Codigo}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Placa&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{placa}}&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="coluna"&gt;
            &lt;span class="label-topo"&gt;Tipo Operação&lt;/span&gt;
            &lt;span class="valor-topo"&gt;{{Tipo_Operacao}}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;h2 class="subheader"&gt;Verificação de dados do Guardian:&lt;/h2&gt;
    &lt;table&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Campo&lt;/th&gt;
                &lt;th&gt;Valor Detalhado&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Código do Ticket&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ Codigo }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Placa do Veículo&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ placa }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Bruto&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_bruto }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Tara&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_tara }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Peso Líquido&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ peso_liquido }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Fazenda / Cliente&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ fazenda }}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class="campo-nome"&gt;Motorista&lt;/td&gt;
                &lt;td class="campo-valor"&gt;{{ motorista }}&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</spiffworkflow:instructionsForEndUser>
        <spiffworkflow:properties>
          <spiffworkflow:property name="formJsonSchemaFilename" value="validacao-guardian-schema.json" />
          <spiffworkflow:property name="formUiSchemaFilename" value="validacao-guardian-uischema.json" />
        </spiffworkflow:properties>
        <spiffworkflow:preScript>lane_owners = {
    "Armazem": group_members
}</spiffworkflow:preScript>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_013r7wx</bpmn:incoming>
      <bpmn:outgoing>Flow_1c2rh6k</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_1m3w1tw" default="Flow_18dhnb8">
      <bpmn:incoming>Flow_1c2rh6k</bpmn:incoming>
      <bpmn:outgoing>Flow_1t416f5</bpmn:outgoing>
      <bpmn:outgoing>Flow_18dhnb8</bpmn:outgoing>
      <bpmn:outgoing>Flow_1hlomz4</bpmn:outgoing>
      <bpmn:outgoing>Flow_11taq3a</bpmn:outgoing>
      <bpmn:outgoing>Flow_0w47m79</bpmn:outgoing>
      <bpmn:outgoing>Flow_19ioriy</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_0c7i1yo">
      <bpmn:incoming>Flow_12ywuln</bpmn:incoming>
      <bpmn:incoming>Flow_18dhnb8</bpmn:incoming>
      <bpmn:incoming>Flow_118mmlb</bpmn:incoming>
      <bpmn:incoming>Flow_06cpprz</bpmn:incoming>
      <bpmn:incoming>Flow_0gsov0c</bpmn:incoming>
      <bpmn:incoming>Flow_00j5498</bpmn:incoming>
      <bpmn:outgoing>Flow_1ungm5p</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="Event_1bn9d93">
      <bpmn:incoming>Flow_1ungm5p</bpmn:incoming>
    </bpmn:endEvent>
  </bpmn:process>
  <bpmn:message id="guardian_receive" name="guardian_receive" />
  <bpmn:signal id="Corrigir_Romaneio" name="Corrigir_Romaneio" />
  <bpmn:signal id="Corrigir_Classificacao" name="Corrigir_Classificacao" />
  <bpmn:dataStore id="typeahead" name="KKVDataStore" />
  <bpmn:signal id="Signal_NFe" name="Signal_NFe" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0krc72e">
      <bpmndi:BPMNShape id="Participant_1lzjh0k_di" bpmnElement="Participant_1lzjh0k" isHorizontal="true">
        <dc:Bounds x="-320" y="-150" width="1330" height="940" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0wb7vrb_di" bpmnElement="Lane_0wb7vrb" isHorizontal="true">
        <dc:Bounds x="-290" y="70" width="1300" height="720" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1ji3saj_di" bpmnElement="Lane_1ji3saj" isHorizontal="true">
        <dc:Bounds x="-290" y="-150" width="1300" height="220" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0rleumy_di" bpmnElement="Activity_0ilhvov">
        <dc:Bounds x="-130" y="-70" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1oylesy_di" bpmnElement="Event_0k0zfjf">
        <dc:Bounds x="-218" y="-48" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0tlv0ji_di" bpmnElement="Activity_0tlv0ji">
        <dc:Bounds x="380" y="540" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0ay4grk_di" bpmnElement="Activity_0omwooq">
        <dc:Bounds x="380" y="650" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0yfassp_di" bpmnElement="Activity_Romaneio_Proprio" isExpanded="false">
        <dc:Bounds x="380" y="205" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0py8yxa_di" bpmnElement="Activity_Carregamento">
        <dc:Bounds x="380" y="430" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1v5d5k6" bpmnElement="Activity_Rom_Entrada_Terceiros" isExpanded="false">
        <dc:Bounds x="380" y="320" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_03knz0p_di" bpmnElement="Activity_1musc35">
        <dc:Bounds x="90" y="380" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1m3w1tw_di" bpmnElement="Gateway_1m3w1tw" isMarkerVisible="true">
        <dc:Bounds x="235" y="395" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0c7i1yo_di" bpmnElement="Gateway_0c7i1yo" isMarkerVisible="true">
        <dc:Bounds x="585" y="395" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1bn9d93_di" bpmnElement="Event_1bn9d93">
        <dc:Bounds x="682" y="402" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_013r7wx_di" bpmnElement="Flow_013r7wx">
        <di:waypoint x="-30" y="-30" />
        <di:waypoint x="20" y="-30" />
        <di:waypoint x="20" y="420" />
        <di:waypoint x="90" y="420" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1c2rh6k_di" bpmnElement="Flow_1c2rh6k">
        <di:waypoint x="190" y="420" />
        <di:waypoint x="235" y="420" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0udm8qs_di" bpmnElement="Flow_0udm8qs">
        <di:waypoint x="-182" y="-30" />
        <di:waypoint x="-130" y="-30" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1t416f5_di" bpmnElement="Flow_1t416f5">
        <di:waypoint x="260" y="395" />
        <di:waypoint x="260" y="245" />
        <di:waypoint x="380" y="245" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18dhnb8_di" bpmnElement="Flow_18dhnb8">
        <di:waypoint x="260" y="395" />
        <di:waypoint x="260" y="150" />
        <di:waypoint x="610" y="150" />
        <di:waypoint x="610" y="395" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1hlomz4_di" bpmnElement="Flow_1hlomz4">
        <di:waypoint x="260" y="395" />
        <di:waypoint x="260" y="360" />
        <di:waypoint x="380" y="360" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_11taq3a_di" bpmnElement="Flow_11taq3a">
        <di:waypoint x="260" y="445" />
        <di:waypoint x="260" y="470" />
        <di:waypoint x="380" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0w47m79_di" bpmnElement="Flow_0w47m79">
        <di:waypoint x="260" y="445" />
        <di:waypoint x="260" y="580" />
        <di:waypoint x="380" y="580" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19ioriy_di" bpmnElement="Flow_19ioriy">
        <di:waypoint x="260" y="445" />
        <di:waypoint x="260" y="690" />
        <di:waypoint x="380" y="690" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ungm5p_di" bpmnElement="Flow_1ungm5p">
        <di:waypoint x="635" y="420" />
        <di:waypoint x="682" y="420" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12ywuln_di" bpmnElement="Flow_12ywuln">
        <di:waypoint x="480" y="245" />
        <di:waypoint x="610" y="245" />
        <di:waypoint x="610" y="395" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_118mmlb_di" bpmnElement="Flow_118mmlb">
        <di:waypoint x="480" y="470" />
        <di:waypoint x="610" y="470" />
        <di:waypoint x="610" y="445" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_06cpprz_di" bpmnElement="Flow_06cpprz">
        <di:waypoint x="480" y="360" />
        <di:waypoint x="610" y="360" />
        <di:waypoint x="610" y="395" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0gsov0c_di" bpmnElement="Flow_0gsov0c">
        <di:waypoint x="480" y="580" />
        <di:waypoint x="610" y="580" />
        <di:waypoint x="610" y="445" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_00j5498_di" bpmnElement="Flow_00j5498">
        <di:waypoint x="480" y="690" />
        <di:waypoint x="610" y="690" />
        <di:waypoint x="610" y="445" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmndi:BPMNDiagram id="BPMNDiagram_0f0ewyz">
    <bpmndi:BPMNPlane id="BPMNPlane_0taoknf" bpmnElement="Activity_Romaneio_Proprio">
      <bpmndi:BPMNShape id="Event_0zoxg5z_di" bpmnElement="Event_0zoxg5z">
        <dc:Bounds x="180" y="182" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1a29uzu_di" bpmnElement="Activity_105i7gb">
        <dc:Bounds x="270" y="160" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0tr2dm0_di" bpmnElement="Activity_0y50jff">
        <dc:Bounds x="430" y="160" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1ukd414_di" bpmnElement="Gateway_1ukd414" isMarkerVisible="true">
        <dc:Bounds x="595" y="175" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_14tzpxq_di" bpmnElement="Gateway_14tzpxq" isMarkerVisible="true">
        <dc:Bounds x="1235" y="175" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ncmgh9_di" bpmnElement="Event_0ncmgh9">
        <dc:Bounds x="2332" y="182" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_165ek0z_di" bpmnElement="Activity_Entrada_Propria">
        <dc:Bounds x="710" y="160" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0ese8zs_di" bpmnElement="Activity_1melp3v">
        <dc:Bounds x="890" y="160" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1pip8rc_di" bpmnElement="Activity_1nolbm5">
        <dc:Bounds x="1060" y="160" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1rxmjea_di" bpmnElement="Activity_1x3xako">
        <dc:Bounds x="890" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_14mp40x_di" bpmnElement="Activity_1v76b40">
        <dc:Bounds x="1360" y="160" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_104yaz3_di" bpmnElement="Activity_11v3g19">
        <dc:Bounds x="1630" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1lnghmd_di" bpmnElement="Gateway_1lnghmd" isMarkerVisible="true">
        <dc:Bounds x="1955" y="175" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1fpt591_di" bpmnElement="Gateway_1fpt591" isMarkerVisible="true">
        <dc:Bounds x="2215" y="175" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1u91ntp_di" bpmnElement="Activity_0etd0j3">
        <dc:Bounds x="2060" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1sbz781_di" bpmnElement="Activity_0n087k7">
        <dc:Bounds x="2060" y="300" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1p75pxl_di" bpmnElement="Gateway_1p75pxl" isMarkerVisible="true">
        <dc:Bounds x="1515" y="175" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_09p7dmx_di" bpmnElement="Gateway_09p7dmx" isMarkerVisible="true">
        <dc:Bounds x="1385" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_076uvdr_di" bpmnElement="Activity_1dr1qud">
        <dc:Bounds x="1790" y="160" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1tuxy73_di" bpmnElement="Event_020hfzr">
        <dc:Bounds x="1832" y="142" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1cqmhxk_di" bpmnElement="Event_1g8aler">
        <dc:Bounds x="1392" y="142" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1algimy_di" bpmnElement="Event_0141z9j">
        <dc:Bounds x="1842" y="222" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_16u6gqu_di" bpmnElement="Flow_16u6gqu">
        <di:waypoint x="216" y="200" />
        <di:waypoint x="270" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_136yd5k_di" bpmnElement="Flow_136yd5k">
        <di:waypoint x="370" y="200" />
        <di:waypoint x="430" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04smuyx_di" bpmnElement="Flow_04smuyx">
        <di:waypoint x="530" y="200" />
        <di:waypoint x="595" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1lciuki_di" bpmnElement="Flow_1lciuki">
        <di:waypoint x="645" y="200" />
        <di:waypoint x="710" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0klpgas_di" bpmnElement="Flow_0klpgas">
        <di:waypoint x="810" y="200" />
        <di:waypoint x="890" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0xgvf0k_di" bpmnElement="Flow_0xgvf0k">
        <di:waypoint x="990" y="200" />
        <di:waypoint x="1060" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1igm958_di" bpmnElement="Flow_1igm958">
        <di:waypoint x="1160" y="200" />
        <di:waypoint x="1235" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ex4mqu_di" bpmnElement="Flow_1ex4mqu">
        <di:waypoint x="1285" y="200" />
        <di:waypoint x="1360" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0oab1ki_di" bpmnElement="Flow_0oab1ki">
        <di:waypoint x="1260" y="225" />
        <di:waypoint x="1260" y="300" />
        <di:waypoint x="990" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1io6pzs_di" bpmnElement="Flow_1io6pzs">
        <di:waypoint x="890" y="300" />
        <di:waypoint x="620" y="300" />
        <di:waypoint x="620" y="225" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05ajo3e_di" bpmnElement="Flow_05ajo3e">
        <di:waypoint x="1460" y="200" />
        <di:waypoint x="1515" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1nna3yh_di" bpmnElement="Flow_1nna3yh">
        <di:waypoint x="1730" y="200" />
        <di:waypoint x="1790" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_173bou3_di" bpmnElement="Flow_173bou3">
        <di:waypoint x="2005" y="200" />
        <di:waypoint x="2060" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0g30x8t_di" bpmnElement="Flow_0g30x8t">
        <di:waypoint x="2160" y="200" />
        <di:waypoint x="2215" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0v2d1gu_di" bpmnElement="Flow_0v2d1gu">
        <di:waypoint x="2265" y="200" />
        <di:waypoint x="2332" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_121yxsj_di" bpmnElement="Flow_121yxsj">
        <di:waypoint x="2240" y="225" />
        <di:waypoint x="2240" y="340" />
        <di:waypoint x="2160" y="340" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0corjcl_di" bpmnElement="Flow_0corjcl">
        <di:waypoint x="2060" y="340" />
        <di:waypoint x="1980" y="340" />
        <di:waypoint x="1980" y="225" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bqsj54_di" bpmnElement="Flow_0bqsj54">
        <di:waypoint x="1890" y="200" />
        <di:waypoint x="1955" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0lrsl8v_di" bpmnElement="Flow_0lrsl8v">
        <di:waypoint x="1565" y="200" />
        <di:waypoint x="1630" y="200" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1prezdt_di" bpmnElement="Flow_1prezdt">
        <di:waypoint x="1860" y="258" />
        <di:waypoint x="1860" y="340" />
        <di:waypoint x="1540" y="340" />
        <di:waypoint x="1540" y="225" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0koquo6_di" bpmnElement="Flow_0koquo6">
        <di:waypoint x="1385" y="70" />
        <di:waypoint x="620" y="70" />
        <di:waypoint x="620" y="175" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1yf2mnp_di" bpmnElement="Flow_1yf2mnp">
        <di:waypoint x="1410" y="142" />
        <di:waypoint x="1410" y="95" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ctd8t1_di" bpmnElement="Flow_0ctd8t1">
        <di:waypoint x="1850" y="142" />
        <di:waypoint x="1850" y="70" />
        <di:waypoint x="1435" y="70" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmndi:BPMNDiagram id="BPMNDiagram_183izcx">
    <bpmndi:BPMNPlane id="BPMNPlane_0j8jfoo" bpmnElement="Activity_Carregamento">
      <bpmndi:BPMNShape id="Event_1qogmqf_di" bpmnElement="Event_1qogmqf">
        <dc:Bounds x="102" y="192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0njqd9w_di" bpmnElement="Activity_0o3xe4a">
        <dc:Bounds x="190" y="170" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ukqr8b_di" bpmnElement="Activity_11m10av">
        <dc:Bounds x="350" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0z8u3h9_di" bpmnElement="Gateway_0z8u3h9" isMarkerVisible="true">
        <dc:Bounds x="1225" y="185" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0i6duu6_di" bpmnElement="Event_0i6duu6">
        <dc:Bounds x="2032" y="192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_01w1irp_di" bpmnElement="Activity_17yvhbq">
        <dc:Bounds x="752" y="170" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0zgpi3c_di" bpmnElement="Activity_1tx4cxs">
        <dc:Bounds x="910" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1cg3krj_di" bpmnElement="Activity_1stgqhy">
        <dc:Bounds x="1320" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0iilj6f_di" bpmnElement="Gateway_0iilj6f" isMarkerVisible="true">
        <dc:Bounds x="1645" y="185" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0p64io2_di" bpmnElement="Gateway_0p64io2" isMarkerVisible="true">
        <dc:Bounds x="1925" y="185" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_14vg3n2_di" bpmnElement="Activity_0ykztz7">
        <dc:Bounds x="1760" y="170" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1u4nzk0_di" bpmnElement="Activity_1pdqo3i">
        <dc:Bounds x="1760" y="280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1sbm04a_di" bpmnElement="Activity_08da8i1">
        <dc:Bounds x="1480" y="170" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1lzb89o_di" bpmnElement="Gateway_1lzb89o" isMarkerVisible="true">
        <dc:Bounds x="645" y="185" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1euh4o7_di" bpmnElement="Activity_1wr2atl">
        <dc:Bounds x="1070" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_10io8v9_di" bpmnElement="Activity_1knxsgc">
        <dc:Bounds x="500" y="170" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ajgwzt_di" bpmnElement="Event_0wh6sk7">
        <dc:Bounds x="1522" y="152" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1vj1jt6_di" bpmnElement="Event_1kf20sr">
        <dc:Bounds x="1522" y="232" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1lxx7qc_di" bpmnElement="Flow_1lxx7qc">
        <di:waypoint x="138" y="210" />
        <di:waypoint x="190" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1mh7hhy_di" bpmnElement="Flow_1mh7hhy">
        <di:waypoint x="290" y="210" />
        <di:waypoint x="350" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1hzqs8s_di" bpmnElement="Flow_1hzqs8s">
        <di:waypoint x="450" y="210" />
        <di:waypoint x="500" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_06xts44_di" bpmnElement="Flow_06xts44">
        <di:waypoint x="1275" y="210" />
        <di:waypoint x="1320" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1av3k3k_di" bpmnElement="Flow_1av3k3k">
        <di:waypoint x="1580" y="210" />
        <di:waypoint x="1645" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_151zoq6_di" bpmnElement="Flow_151zoq6">
        <di:waypoint x="852" y="210" />
        <di:waypoint x="910" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ehehpk_di" bpmnElement="Flow_1ehehpk">
        <di:waypoint x="1010" y="210" />
        <di:waypoint x="1070" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ozolji_di" bpmnElement="Flow_0ozolji">
        <di:waypoint x="1420" y="210" />
        <di:waypoint x="1480" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ec1jog_di" bpmnElement="Flow_0ec1jog">
        <di:waypoint x="1860" y="210" />
        <di:waypoint x="1925" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rpq33w_di" bpmnElement="Flow_1rpq33w">
        <di:waypoint x="1695" y="210" />
        <di:waypoint x="1760" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1agtqi8_di" bpmnElement="Flow_1agtqi8">
        <di:waypoint x="1975" y="210" />
        <di:waypoint x="2032" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ibmt2w_di" bpmnElement="Flow_0ibmt2w">
        <di:waypoint x="1950" y="235" />
        <di:waypoint x="1950" y="320" />
        <di:waypoint x="1860" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_13uhsp1_di" bpmnElement="Flow_13uhsp1">
        <di:waypoint x="1760" y="320" />
        <di:waypoint x="1670" y="320" />
        <di:waypoint x="1670" y="235" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1m4ap3y_di" bpmnElement="Flow_1m4ap3y">
        <di:waypoint x="1540" y="268" />
        <di:waypoint x="1540" y="320" />
        <di:waypoint x="1250" y="320" />
        <di:waypoint x="1250" y="235" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17lfqtm_di" bpmnElement="Flow_17lfqtm">
        <di:waypoint x="695" y="210" />
        <di:waypoint x="752" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_02fcu7j_di" bpmnElement="Flow_02fcu7j">
        <di:waypoint x="1540" y="152" />
        <di:waypoint x="1540" y="90" />
        <di:waypoint x="670" y="90" />
        <di:waypoint x="670" y="185" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07om7y9_di" bpmnElement="Flow_07om7y9">
        <di:waypoint x="1170" y="210" />
        <di:waypoint x="1225" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_095ipf4_di" bpmnElement="Flow_095ipf4">
        <di:waypoint x="600" y="210" />
        <di:waypoint x="645" y="210" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmndi:BPMNDiagram id="BPMNDiagram_0y5lhmg">
    <bpmndi:BPMNPlane id="BPMNPlane_0wb8nzq" bpmnElement="Activity_Rom_Entrada_Terceiros">
      <bpmndi:BPMNShape id="BPMNShape_0b7occp" bpmnElement="Event_1sn17ck">
        <dc:Bounds x="180" y="222" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1voevvf" bpmnElement="Activity_1mlqka7">
        <dc:Bounds x="270" y="200" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_13ukqkj" bpmnElement="Activity_0b7wckt">
        <dc:Bounds x="430" y="200" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0hedzyf" bpmnElement="Gateway_0fp7sly" isMarkerVisible="true">
        <dc:Bounds x="615" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1tys1ua" bpmnElement="Event_1k2vf8p">
        <dc:Bounds x="2012" y="222" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0bvys95" bpmnElement="Activity_0r8ommc">
        <dc:Bounds x="730" y="200" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1gw1p6y" bpmnElement="Activity_0v47qb9">
        <dc:Bounds x="1260" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0f7vl9g" bpmnElement="Gateway_0zg8ctn" isMarkerVisible="true">
        <dc:Bounds x="1575" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1mly33e" bpmnElement="Gateway_1pnfukq" isMarkerVisible="true">
        <dc:Bounds x="1835" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_09o0nrh" bpmnElement="Activity_1e9b00h">
        <dc:Bounds x="1680" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0lik10k" bpmnElement="Activity_0lly3rg">
        <dc:Bounds x="1680" y="340" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1vgr1jb" bpmnElement="Gateway_19fgcql" isMarkerVisible="true">
        <dc:Bounds x="895" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0amcamf" bpmnElement="Gateway_0fvv8hb" isMarkerVisible="true">
        <dc:Bounds x="1155" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0j25c7q" bpmnElement="Activity_0uf9shd">
        <dc:Bounds x="1000" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0g882i9_di" bpmnElement="Activity_04vfgh9">
        <dc:Bounds x="1420" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1y0w6p9_di" bpmnElement="Event_0hvzf3x">
        <dc:Bounds x="1432" y="262" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1qgrtxt_di" bpmnElement="Event_0j8vafm">
        <dc:Bounds x="1472" y="262" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0o3vjdd_di" bpmnElement="Event_0xqpatd">
        <dc:Bounds x="1462" y="182" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_1oi4qy7" bpmnElement="Flow_10873xt">
        <di:waypoint x="216" y="240" />
        <di:waypoint x="270" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1sn2edb" bpmnElement="Flow_1tkaxx6">
        <di:waypoint x="370" y="240" />
        <di:waypoint x="430" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1f8alw0" bpmnElement="Flow_00yjfhe">
        <di:waypoint x="530" y="240" />
        <di:waypoint x="615" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_06dowbr" bpmnElement="Flow_0jqo6ob">
        <di:waypoint x="665" y="240" />
        <di:waypoint x="730" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0g66nt9" bpmnElement="Flow_1jx1s8k">
        <di:waypoint x="1885" y="240" />
        <di:waypoint x="2012" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_18xzd7j" bpmnElement="Flow_0tylbkf">
        <di:waypoint x="830" y="240" />
        <di:waypoint x="895" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_195csmy" bpmnElement="Flow_0p5q0hg">
        <di:waypoint x="1205" y="240" />
        <di:waypoint x="1260" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1951pos" bpmnElement="Flow_1yydfbh">
        <di:waypoint x="1360" y="240" />
        <di:waypoint x="1420" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1f5r64d" bpmnElement="Flow_0g85bus">
        <di:waypoint x="1680" y="380" />
        <di:waypoint x="1600" y="380" />
        <di:waypoint x="1600" y="265" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_010mlyv" bpmnElement="Flow_1fwoeln">
        <di:waypoint x="1625" y="240" />
        <di:waypoint x="1680" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1cr8frp" bpmnElement="Flow_12s5qaq">
        <di:waypoint x="1780" y="240" />
        <di:waypoint x="1835" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1opuop9" bpmnElement="Flow_0pro2a0">
        <di:waypoint x="1860" y="265" />
        <di:waypoint x="1860" y="380" />
        <di:waypoint x="1780" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0rsmjnk" bpmnElement="Flow_14mcx1l">
        <di:waypoint x="945" y="240" />
        <di:waypoint x="1000" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1nojb6q" bpmnElement="Flow_0cubujn">
        <di:waypoint x="1100" y="240" />
        <di:waypoint x="1155" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ip73co_di" bpmnElement="Flow_1ip73co">
        <di:waypoint x="1520" y="240" />
        <di:waypoint x="1575" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0f2d8jg_di" bpmnElement="Flow_0f2d8jg">
        <di:waypoint x="1480" y="182" />
        <di:waypoint x="1480" y="162" />
        <di:waypoint x="1180" y="162" />
        <di:waypoint x="1180" y="215" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ec7okk_di" bpmnElement="Flow_0ec7okk">
        <di:waypoint x="1490" y="298" />
        <di:waypoint x="1490" y="380" />
        <di:waypoint x="640" y="380" />
        <di:waypoint x="640" y="265" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1er5he8_di" bpmnElement="Flow_1er5he8">
        <di:waypoint x="1450" y="298" />
        <di:waypoint x="1450" y="318" />
        <di:waypoint x="920" y="318" />
        <di:waypoint x="920" y="265" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
